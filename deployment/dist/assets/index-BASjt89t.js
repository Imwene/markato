const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk/Login-DzWdq_qh.js","assets/vendor/ui-vendor-B-ENX0mK.js","assets/vendor/react-vendor-D7383juu.js","assets/vendor/auth-vendor-sPk1YpsG.js","assets/chunk/admin-HGP0qAwK.js","assets/chunk/useConfig-Bs4z4don.js","assets/chunk/HeroSection-CRSAlhBj.js","assets/chunk/FeatureSection-Ddb5EF0m.js","assets/chunk/Workflow-f28aRlYV.js","assets/chunk/Footer-C47QJ0xv.js","assets/chunk/BookingComponent-f4IX4Wkc.js","assets/chunk/BusinessMap-mO1fNyK1.js","assets/vendor/map-vendor-OUBG0Ih5.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(e,t,r)=>new Promise(((n,s)=>{var o=e=>{try{l(r.next(e))}catch(t){s(t)}},i=e=>{try{l(r.throw(e))}catch(t){s(t)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,i);l((r=r.apply(e,t)).next())}));import{j as a,B as c,F as d,S as u,a as m,G as f,X as h,M as p}from"./vendor/ui-vendor-B-ENX0mK.js";import{a as x,r as v,u as g,b as y,N as j,L as E,B as S,d as b,e as N,R as _}from"./vendor/react-vendor-D7383juu.js";import{j as I}from"./vendor/auth-vendor-sPk1YpsG.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var k={},O=x;k.createRoot=O.createRoot,k.hydrateRoot=O.hydrateRoot;const P={},w=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in P)return;P[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,r&&s.setAttribute("nonce",r),document.head.appendChild(s),t?new Promise(((t,r)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then((t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))},T=v.createContext(null),A=({children:e})=>{const[t,r]=v.useState([]),[n,s]=v.useState(!0),[o,i]=v.useState(null),[c,d]=v.useState(!1),[u,m]=v.useState(null),f=()=>l(void 0,null,(function*(){try{const e=yield fetch("/api/services"),t=yield e.json();t.success?(r(t.data),i(null)):i("Failed to fetch services")}catch(e){i("Error connecting to the server")}finally{s(!1)}}));v.useEffect((()=>{f()}),[]);const h={services:t,loading:n,error:o,refreshServices:f,isModalOpen:c,editingService:u,openModal:(e=null)=>{m(e),d(!0)},closeModal:()=>{d(!1),m(null)}};return a.jsx(T.Provider,{value:h,children:e})},L={API_URL:"https://markatodetailing.com/api",ENDPOINTS:{AUTH:{LOGIN:"/auth/login"},ADMIN:{DASHBOARD:"/admin/dashboard",BOOKINGS:{BASE:"/admin/bookings",DELETE_ALL:"/admin/bookings/delete-all"}},CONFIG:{BASE:e=>`/config/${e}`,BY_ID:(e,t)=>`/config/${e}/${t}`,VEHICLE_TYPES:"/config/vehicle-types",VEHICLE_TYPE_BY_ID:e=>`/config/vehicle-types/${e}`,SCENTS:"/config/scents",SCENT_BY_ID:e=>`/config/scents/${e}`,OPTIONAL_SERVICES:"/config/optional-services",OPTIONAL_SERVICE_BY_ID:e=>`/config/optional-services/${e}`},SERVICES:{BASE:"/services",BY_ID:e=>`/services/${e}`,CHECK_NAME:"/services/check-name"},BOOKINGS:{BASE:"/bookings",PDF:e=>`/bookings/${e}/pdf`,RESEND_EMAIL:e=>`/bookings/${e}/resend-email`,UPDATE_STATUS:e=>`/bookings/${e}/status`}}},C=v.createContext(null),D=({children:e})=>{const[t,r]=v.useState([]),[n,s]=v.useState([]),[o,i]=v.useState([]),[c,d]=v.useState(!0),[u,m]=v.useState(null),[f,h]=v.useState(0),p=(e,t=1e3)=>l(void 0,null,(function*(){try{const r=yield fetch(e);if(429===r.status){if(f<3)return yield new Promise((e=>setTimeout(e,t))),h((e=>e+1)),p(e,2*t);throw new Error("Rate limit exceeded. Please try again later.")}if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return yield r.json()}catch(r){throw r}}));v.useEffect((()=>{let e=!0;return l(void 0,null,(function*(){try{d(!0),m(null);const t=yield p(`${L.API_URL}${L.ENDPOINTS.CONFIG.VEHICLE_TYPES}`);if(!e)return;const n=yield p(`${L.API_URL}${L.ENDPOINTS.CONFIG.SCENTS}`);if(!e)return;const o=yield p(`${L.API_URL}${L.ENDPOINTS.CONFIG.OPTIONAL_SERVICES}`);if(!e)return;t.success&&r(t.data),n.success&&s(n.data),o.success&&i(o.data)}catch(t){e&&m(t.message)}finally{e&&d(!1)}})),()=>{e=!1}}),[]);const x={vehicleTypes:t.filter((e=>e.isActive)),scents:n.filter((e=>e.isActive)),optionalServices:o.filter((e=>e.isActive)),loading:c,error:u,refreshConfig:()=>l(void 0,null,(function*(){h(0);try{d(!0),m(null);const e=yield p(`${L.API_URL}${L.ENDPOINTS.CONFIG.VEHICLE_TYPES}`),t=yield p(`${L.API_URL}${L.ENDPOINTS.CONFIG.SCENTS}`),n=yield p(`${L.API_URL}${L.ENDPOINTS.CONFIG.OPTIONAL_SERVICES}`);e.success&&r(e.data),t.success&&s(t.data),n.success&&i(n.data)}catch(e){m(e.message)}finally{d(!1)}}))};return c?a.jsx("div",{className:"flex justify-center items-center min-h-20",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light"})}):u?a.jsxs("div",{className:"text-red-500 p-4 text-center",children:["Error loading configuration: ",u]}):a.jsx(C.Provider,{value:x,children:e})},R=v.createContext(null),$=({children:e})=>{const[c,d]=v.useState(null),[u,m]=v.useState(!0),[f,h]=v.useState(null),p=g();v.useEffect((()=>{l(void 0,null,(function*(){try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);d(t)}}catch(e){h("Failed to check authentication.")}finally{m(!1)}}))}),[]);v.useEffect((()=>{const e=setInterval((()=>{const e=JSON.parse(localStorage.getItem("user"));(null==e?void 0:e.token)&&!(e=>{if(!e)return!1;try{return I(e).exp>Date.now()/1e3}catch(t){return!1}})(e.token)&&l(void 0,null,(function*(){}))}),3e5);return()=>clearInterval(e)}),[]);const x={user:c,login:(e,a)=>l(void 0,null,(function*(){try{m(!0),h(null);const u=yield fetch(`${L.API_URL}${L.ENDPOINTS.AUTH.LOGIN}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})}),f=yield u.json();if(u.ok){const e=(l=((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&i(e,r,t[r]);if(n)for(var r of n(t))o.call(t,r)&&i(e,r,t[r]);return e})({},f.user),c={token:f.token},t(l,r(c)));return localStorage.setItem("user",JSON.stringify(e)),d(e),p("/admin"),{success:!0}}return h(f.error||"Login failed."),{success:!1,error:f.error}}catch(u){return h("Login failed."),{success:!1,error:"Login failed."}}finally{m(!1)}var l,c})),logout:()=>{localStorage.removeItem("user"),d(null),p("/")},loading:u,error:f};return a.jsx(R.Provider,{value:x,children:e})},B=()=>{const e=v.useContext(R);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},F=({children:e})=>{const{user:t,loading:r}=B(),n=y();return r?a.jsx("div",{children:"Loading..."}):t?e:a.jsx(j,{to:"/login",state:{from:n},replace:!0})},U=[{label:"How it works",href:"#how-it-works"},{label:"Why Choose Us",href:"#why-choose-us"},{label:"Find Us",href:"#find-us"}],V=[{icon:a.jsx(c,{}),text:"Convenience",description:"Hastle free, fast services and easy payments."},{icon:a.jsx(d,{}),text:"Transparency",description:"We offer you our affordable rates, because we have built our business on trust."},{icon:a.jsx(u,{}),text:"Quality",description:"We are committed to quality and take vehicle detailing seriously. Top-notch service is our main auto motive."},{icon:a.jsx(m,{}),text:"Skilled Detailers",description:"Benefit from expert knowledge and precision workmanship."},{icon:a.jsx(f,{}),text:"Real-time updates",description:"Stay informed about your vehicle's service progress with timely notifications."}],M=[{title:"Select Your Car",description:"We Service most makes and models"},{title:"Select The Perfect Car Service",description:"From our broad portfolio of Services"},{title:"Select your Optional Services",description:"Add any additional services you may need"},{title:"Book An Appointment",description:"Book an appointment at a time of your convenience."}],G=()=>{const[e,t]=v.useState(!1),r=y();v.useEffect((()=>{t(!1)}),[r]);const n=e=>{const r=document.getElementById(e.replace("#",""));if(r){const e=-80,n=r.getBoundingClientRect().top+window.pageYOffset+e;window.scrollTo({top:n,behavior:"smooth"}),t(!1)}};return a.jsx("nav",{className:"sticky top-0 z-50 py-3 bg-background-light/80 backdrop-blur-lg border-b border-border-light shadow-sm",children:a.jsxs("div",{className:"container px-4 mx-auto relative lg:text-sm",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center flex-shrink-0",children:a.jsx(E,{to:"/",className:"flex items-center",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:a.jsx("img",{className:"logo",src:"/assets/images/markato-logo-DizJd7vt.svg",alt:"Markato"})})}),a.jsx("ul",{className:"hidden lg:flex ml-14 space-x-12",children:U.map(((e,t)=>a.jsx("li",{children:a.jsx(E,{to:e.href,onClick:()=>n(e.href),className:"text-content-DEFAULT hover:text-primary-light transition-colors cursor-pointer",children:e.label})},t)))}),a.jsx("div",{className:"lg:hidden md:flex flex-col justify-end",children:a.jsx("button",{onClick:()=>t(!e),className:"p-2 text-content-DEFAULT hover:bg-background-dark rounded-md transition-colors","aria-label":e?"Close menu":"Open menu",children:e?a.jsx(h,{}):a.jsx(p,{})})})]}),e&&a.jsx("div",{className:"fixed inset-x-0 top-[73px] z-20 bg-background-light border-b border-border-light \n                        p-6 flex flex-col items-center lg:hidden animate-in fade-in slide-in-from-top",children:a.jsx("ul",{className:"w-full space-y-4",children:U.map(((e,t)=>a.jsx("li",{className:"text-center",children:a.jsx(E,{to:e.href,onClick:()=>n(e.href),className:"block w-full py-2 text-content-DEFAULT hover:text-primary-light transition-colors",children:e.label})},t)))})})]})})},H=()=>a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light"}),a.jsx("span",{className:"ml-2 text-content-light",children:"Loading..."})]}),Y={metrics:{},startTiming:e=>{Y.metrics[e]=performance.now()},endTiming:e=>{if(!Y.metrics[e])return 0;const t=performance.now()-Y.metrics[e];return delete Y.metrics[e],t},logPerformance:e=>{}},z=v.lazy((()=>w((()=>import("./chunk/Login-DzWdq_qh.js")),__vite__mapDeps([0,1,2,3])))),W=v.lazy((()=>w((()=>import("./chunk/admin-HGP0qAwK.js")),__vite__mapDeps([4,1,2,5,3])))),J=v.lazy((()=>w((()=>import("./chunk/HeroSection-CRSAlhBj.js")),__vite__mapDeps([6,1,2])))),q=v.lazy((()=>w((()=>import("./chunk/FeatureSection-Ddb5EF0m.js")),__vite__mapDeps([7,1,2,3])))),K=v.lazy((()=>w((()=>import("./chunk/Workflow-f28aRlYV.js")),__vite__mapDeps([8,1,2,3])))),Q=v.lazy((()=>w((()=>import("./chunk/Footer-C47QJ0xv.js")),__vite__mapDeps([9,1,2])))),X=v.lazy((()=>w((()=>import("./chunk/BookingComponent-f4IX4Wkc.js")),__vite__mapDeps([10,1,2,5,3])))),Z=v.lazy((()=>w((()=>import("./chunk/BusinessMap-mO1fNyK1.js")),__vite__mapDeps([11,1,2,12])))),ee=()=>(v.useEffect((()=>(Y.startTiming("appMount"),()=>{Y.endTiming("appMount")})),[]),v.useEffect((()=>{const e=setInterval((()=>{cacheManager.clearExpired()}),36e5);return()=>clearInterval(e)}),[]),a.jsx(S,{children:a.jsx($,{children:a.jsx(D,{children:a.jsx(A,{children:a.jsx(v.Suspense,{fallback:a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(H,{})}),children:a.jsxs(b,{children:[a.jsx(N,{path:"/login",element:a.jsx(z,{})}),a.jsx(N,{path:"/admin/*",element:a.jsx(F,{children:a.jsx(W,{})})}),a.jsx(N,{path:"/",element:a.jsxs(a.Fragment,{children:[a.jsx(G,{}),a.jsxs("div",{className:"max-w-7xl mx-auto pt-20 px-6",children:[a.jsx(J,{}),a.jsxs("div",{className:"mb-20",id:"booking-section",children:[a.jsx("h2",{className:"text-3xl sm:text-5xl lg:text-6xl text-center mb-10 tracking-wide",children:"Book Your Service"}),a.jsx(X,{})]}),a.jsx("div",{id:"workflow-section",className:"mb-20",children:a.jsx(K,{})}),a.jsx(q,{}),a.jsx(Z,{}),a.jsx(Q,{})]})]})})]})})})})})}));l(void 0,null,(function*(){if("serviceWorker"in navigator)try{return yield navigator.serviceWorker.register("/sw.js")}catch(e){return null}return null})),k.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(ee,{})}));export{L as C,A as S,T as a,C as b,M as c,V as f,B as u};
