var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,a=(e,s)=>{for(var t in s||(s={}))l.call(s,t)&&i(e,t,s[t]);if(r)for(var t of r(s))n.call(s,t)&&i(e,t,s[t]);return e},d=(e,r)=>s(e,t(r)),c=(e,s)=>{var t={};for(var i in e)l.call(e,i)&&s.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&r)for(var i of r(e))s.indexOf(i)<0&&n.call(e,i)&&(t[i]=e[i]);return t},o=(e,s,t)=>new Promise(((r,l)=>{var n=e=>{try{a(t.next(e))}catch(s){l(s)}},i=e=>{try{a(t.throw(e))}catch(s){l(s)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,i);a((t=t.apply(e,s)).next())}));import{j as x,X as h,M as m,L as u,b as g,C as b,c as j,d as v,e as p,U as N,D as f,R as y,f as k,g as A,h as w,Y as E,T as S,i as C,k as D,l as T,P as L,m as F,n as U,o as I,A as O,p as _}from"../vendor/ui-vendor-B-ENX0mK.js";import{u as P,C as B,S as z}from"../index-BASjt89t.js";import{r as R,b as $,u as V,L as M,O as G,R as Y,d as H,e as K,N as q}from"../vendor/react-vendor-D7383juu.js";import{a as W,u as J}from"./useConfig-Bs4z4don.js";import"../vendor/auth-vendor-sPk1YpsG.js";const Q=()=>{const[e,s]=R.useState(!0),t=$(),r=V(),{user:l,login:n,logout:i}=P(),a=[{icon:x.jsx(g,{size:20}),label:"Dashboard",path:"/admin"},{icon:x.jsx(b,{size:20}),label:"Bookings",path:"/admin/bookings"},{icon:x.jsx(j,{size:20}),label:"Services",path:"/admin/services"},{icon:x.jsx(v,{size:20}),label:"Configurations",path:"/admin/config"}];R.useEffect((()=>{l||r("/login")}),[l,r]);return x.jsxs("div",{className:"min-h-screen bg-background-light",children:[x.jsx("button",{onClick:()=>s(!e),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-background-light rounded-md border border-border-light shadow-sm",children:e?x.jsx(h,{size:24}):x.jsx(m,{size:24})}),x.jsxs("div",{className:`\n        fixed top-0 left-0 h-full w-64 bg-background-DEFAULT border-r border-border-light\n        transition-transform duration-300 ease-in-out z-40\n        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0\n      `,children:[x.jsxs("div",{className:"p-6 border-b border-border-light",children:[x.jsx("h1",{className:"text-2xl font-bold text-primary-light",children:"Admin Panel"}),x.jsx("p",{className:"text-sm text-content-light mt-2",children:"Manage your services and bookings"})]}),x.jsxs("nav",{className:"mt-6",children:[a.map((e=>{return x.jsxs(M,{to:e.path,className:`\n                flex items-center gap-3 px-6 py-3 text-sm transition-colors\n                ${s=e.path,t.pathname===s?"bg-primary-light/10 text-primary-dark border-r-2 border-primary-light":"text-content-DEFAULT hover:bg-background-dark"}\n              `,children:[e.icon,e.label]},e.path);var s})),l&&x.jsxs("button",{onClick:i,className:"flex items-center gap-3 px-6 py-3 text-sm text-red-500 hover:bg-red-50 transition-colors",children:[x.jsx(u,{size:20}),"Logout"]})]})]}),x.jsx("div",{className:"lg:ml-64 min-h-screen transition-all duration-300 "+(e?"ml-64":"ml-0"),children:x.jsx("div",{className:"p-8",children:x.jsx(G,{})})})]})},X=()=>{const[e,s]=R.useState({totalBookings:0,pendingBookings:0,completedBookings:0,totalRevenue:0,recentBookings:[],dailyBookings:[]}),[t,r]=R.useState(!0),[l,n]=R.useState(null),i=V();R.useEffect((()=>{a()}),[]);const a=()=>o(void 0,null,(function*(){try{r(!0),n(null);const e=yield W.get(B.ENDPOINTS.ADMIN.DASHBOARD);e.success&&s(e.stats)}catch(e){"No token, authorization denied"===e.message?i("/login"):n(e.message)}finally{r(!1)}})),d=({title:e,value:s,icon:t,trend:r})=>x.jsx("div",{className:"bg-background-light p-6 rounded-lg border border-border-light",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-content-light text-sm",children:e}),x.jsx("p",{className:"text-2xl font-bold text-content-dark mt-2",children:s}),r&&x.jsxs("p",{className:"text-sm mt-2 "+(r>=0?"text-green-500":"text-red-500"),children:[r>=0?"+":"",r,"% from last week"]})]}),x.jsx("div",{className:"p-3 bg-primary-light/10 rounded-lg",children:x.jsx(t,{className:"w-5 h-5 text-primary-DEFAULT"})})]})});return t?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light"})}):l?x.jsx("div",{className:"text-red-500 text-center p-4 bg-red-50 rounded-lg",children:l}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-content-dark",children:"Dashboard"}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{onClick:a,className:"px-4 py-2 text-sm bg-primary-light text-white rounded-lg hover:bg-primary-DEFAULT transition-colors",children:"Refresh Data"}),x.jsx("button",{onClick:()=>o(void 0,null,(function*(){if(window.confirm("Are you sure you want to delete ALL bookings? This action cannot be undone."))try{(yield W.delete(B.ENDPOINTS.ADMIN.BOOKINGS.DELETE_ALL)).success&&(yield a(),alert("All bookings have been deleted successfully"))}catch(e){alert("Failed to delete bookings")}})),className:"px-4 py-2 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Delete All Bookings"})]})]}),x.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[x.jsx(d,{title:"Total Bookings",value:e.totalBookings,icon:b,trend:5}),x.jsx(d,{title:"Pending Bookings",value:e.pendingBookings,icon:p,trend:-2}),x.jsx(d,{title:"Completed Bookings",value:e.completedBookings,icon:N,trend:8}),x.jsx(d,{title:"Total Revenue",value:`$${e.totalRevenue||0}`,icon:f,trend:12})]}),x.jsxs("div",{className:"h-[400px] bg-background-light rounded-lg p-6 border border-border-light",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4 text-content-dark",children:"Daily Bookings"}),x.jsx(y,{width:"100%",height:"100%",children:x.jsxs(k,{data:e.dailyBookings,children:[x.jsx(A,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),x.jsx(w,{dataKey:"date",tick:{fill:"#64748b"},axisLine:{stroke:"#cbd5e1"}}),x.jsx(E,{tick:{fill:"#64748b"},axisLine:{stroke:"#cbd5e1"}}),x.jsx(S,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},labelStyle:{color:"#0f172a"}}),x.jsx(C,{dataKey:"bookings",fill:"#0cc0df",radius:[4,4,0,0],name:"Number of Bookings"})]})})]}),x.jsxs("div",{className:"bg-background-light rounded-lg border border-border-light",children:[x.jsx("div",{className:"p-6 border-b border-border-light",children:x.jsx("h3",{className:"text-lg font-semibold text-content-dark",children:"Recent Bookings"})}),x.jsx("div",{className:"divide-y divide-border-light",children:e.recentBookings.map((e=>x.jsx("div",{className:"p-6 hover:bg-background-dark transition-colors",children:x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-content-DEFAULT",children:e.customerName}),x.jsx("p",{className:"text-sm text-content-light mt-1",children:e.service}),x.jsxs("p",{className:"text-sm text-primary-DEFAULT mt-1",children:["$",e.totalPrice]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("completed"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"),children:e.status}),x.jsx("p",{className:"text-sm text-content-light mt-2",children:e.date})]})]})},e.id)))})]})]})},Z=e=>{var s=e,{children:t,className:r=""}=s,l=c(s,["children","className"]);return x.jsx("table",d(a({className:`w-full caption-bottom text-sm ${r}`},l),{children:t}))},ee=e=>{var s=e,{children:t,className:r=""}=s,l=c(s,["children","className"]);return x.jsx("thead",d(a({className:`border-b border-border-DEFAULT bg-background-dark ${r}`},l),{children:t}))},se=e=>{var s=e,{children:t,className:r=""}=s,l=c(s,["children","className"]);return x.jsx("tbody",d(a({className:`${r}`},l),{children:t}))},te=e=>{var s=e,{children:t,className:r=""}=s,l=c(s,["children","className"]);return x.jsx("tr",d(a({className:`\n      border-b border-border-light \n      transition-colors \n      hover:bg-background-dark/50\n      ${r}\n    `},l),{children:t}))},re=e=>{var s=e,{children:t,className:r=""}=s,l=c(s,["children","className"]);return x.jsx("th",d(a({className:`\n      h-12 px-4 \n      text-left align-middle \n      font-medium \n      text-content-light\n      ${r}\n    `},l),{children:t}))},le=e=>{var s=e,{children:t,className:r=""}=s,l=c(s,["children","className"]);return x.jsx("td",d(a({className:`\n      p-4 \n      align-middle \n      text-content-DEFAULT\n      ${r}\n    `},l),{children:t}))},ne=Y.forwardRef(((e,s)=>{var t=e,{className:r="",type:l="text"}=t,n=c(t,["className","type"]);return x.jsx("input",a({type:l,className:`flex h-10 w-full rounded-md \n      border border-border-DEFAULT\n      bg-background-light\n      px-3 py-2 text-sm text-content-DEFAULT\n      file:border-0 file:bg-transparent file:text-sm file:font-medium\n      placeholder:text-content-light\n      focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-light focus-visible:ring-offset-2\n      disabled:cursor-not-allowed disabled:opacity-50\n      hover:border-border-dark\n      ${r}`,ref:s},n))}));ne.displayName="Input";const ie=({children:e,content:s})=>{const[t,r]=R.useState(!1),[l,n]=R.useState({top:0,left:0}),i=R.useRef(null),a=R.useRef(null),d=()=>{if(t&&i.current&&a.current){const e=a.current.getBoundingClientRect(),s=i.current.getBoundingClientRect();let t=e.bottom+10,r=e.left;r+s.width>window.innerWidth&&(r=window.innerWidth-s.width-10),t+s.height>window.innerHeight&&(t=e.top-s.height-10),n({top:t,left:Math.max(10,r)})}};return R.useEffect((()=>{if(t)return d(),window.addEventListener("resize",d),window.addEventListener("scroll",d),()=>{window.removeEventListener("resize",d),window.removeEventListener("scroll",d)}}),[t]),x.jsxs("div",{className:"relative inline-block",ref:a,children:[x.jsx("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:"cursor-pointer",children:e}),t&&x.jsx("div",{ref:i,style:{position:"fixed",top:`${l.top}px`,left:`${l.left}px`},className:"z-50 w-64 p-2 text-sm bg-background-light border border-border-DEFAULT rounded-lg shadow-lg text-content-DEFAULT",children:s})]})},ae=()=>{var e;const[s,t]=R.useState([]),[r,l]=R.useState(!0),[n,i]=R.useState(""),[c,h]=R.useState("all"),[m,u]=R.useState(null),[g,b]=R.useState(null),[j,v]=R.useState(""),[p,N]=R.useState(!1);R.useEffect((()=>{f()}),[]);const f=()=>o(void 0,null,(function*(){try{const e=yield W.get(B.ENDPOINTS.BOOKINGS.BASE);e.success&&t(e.data)}catch(e){}finally{l(!1)}})),y=()=>{N(!1),u(null),b(null),v("")},k=(e="pending")=>({pending:"bg-amber-100 text-amber-700",confirmed:"bg-green-100 text-green-700",in_progress:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700"}[e.toLowerCase()]||"bg-gray-100 text-gray-700"),A=s.filter((e=>{var s;const t=((null==(s=e.name)?void 0:s.toLowerCase())||"").includes(n.toLowerCase())||(e.contact||"").includes(n)||(e.confirmationNumber||"").includes(n);return"all"===c?t:t&&e.status===c}));return r?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light"})}):x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"flex justify-between items-center",children:x.jsx("h1",{className:"text-2xl font-bold text-content-dark",children:"Booking Management"})}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[x.jsxs("div",{className:"relative flex-1",children:[x.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-content-light"}),x.jsx(ne,{type:"text",placeholder:"Search by name, phone, or confirmation number...",value:n,onChange:e=>i(e.target.value),className:"pl-10 w-full"})]}),x.jsxs("select",{value:c,onChange:e=>h(e.target.value),className:"px-4 py-2 bg-background-light rounded-lg border border-border-DEFAULT text-content-DEFAULT w-full sm:w-auto",children:[x.jsx("option",{value:"all",children:"All Bookings"}),x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"confirmed",children:"Confirmed"}),x.jsx("option",{value:"in_progress",children:"In Progress"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),p&&m&&x.jsx("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-background-light p-6 rounded-lg w-full max-w-lg border border-border-DEFAULT shadow-lg",children:[x.jsx("h3",{className:"text-lg font-medium mb-4 text-content-dark",children:"Update Status"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2 text-content-DEFAULT",children:"New Status"}),x.jsx("div",{className:"w-full p-2 bg-background-DEFAULT border border-border-DEFAULT rounded-lg text-content-DEFAULT",children:x.jsx("span",{className:"capitalize",children:g.replace("_"," ")})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2 text-content-DEFAULT",children:"Note (Optional)"}),x.jsx("textarea",{value:j,onChange:e=>v(e.target.value),className:"w-full p-2 bg-background-light border border-border-DEFAULT rounded-lg h-24 text-content-DEFAULT",placeholder:"Add a note about this status change..."})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium mb-2 text-content-DEFAULT",children:"Status History"}),x.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:null==(e=m.statusHistory)?void 0:e.map(((e,s)=>x.jsxs("div",{className:"text-sm p-2 bg-background-DEFAULT rounded-lg border border-border-light",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"font-medium capitalize text-content-DEFAULT",children:e.status.replace("_"," ")}),x.jsx("span",{className:"text-content-light",children:new Date(e.timestamp).toLocaleString()})]}),e.note&&x.jsx("p",{className:"text-content-light mt-1",children:e.note})]},s)))})]})]}),x.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[x.jsx("button",{onClick:y,className:"px-4 py-2 bg-background-DEFAULT text-content-DEFAULT rounded-lg hover:bg-background-dark border border-border-DEFAULT transition-colors",children:"Cancel"}),x.jsx("button",{onClick:()=>o(void 0,null,(function*(){if(m&&g)try{(yield W.put(B.ENDPOINTS.BOOKINGS.UPDATE_STATUS(m._id),{status:g,note:j})).success&&(t(s.map((e=>e._id===m._id?d(a({},e),{status:g}):e))),y(),f())}catch(e){}})),className:"px-4 py-2 bg-primary-light text-white rounded-lg hover:bg-primary-DEFAULT transition-colors",children:"Update Status"})]})]})}),x.jsx("div",{className:"w-full overflow-x-auto bg-background-light rounded-lg border border-border-light relative z-0",children:x.jsxs(Z,{children:[x.jsx(ee,{children:x.jsxs(te,{children:[x.jsx(re,{className:"w-[10%]",children:"Booking #"}),x.jsx(re,{className:"w-[15%]",children:"Date & Time"}),x.jsx(re,{className:"w-[20%]",children:"Customer"}),x.jsx(re,{className:"w-[20%]",children:"Service"}),x.jsx(re,{className:"w-[15%]",children:"Vehicle"}),x.jsx(re,{className:"w-[10%]",children:"Status"}),x.jsx(re,{className:"w-[10%]",children:"Total"})]})}),x.jsx(se,{children:A.map((e=>{var t;return x.jsxs(te,{children:[x.jsx(le,{className:"font-mono text-primary-DEFAULT",children:e.confirmationNumber||"N/A"}),x.jsx(le,{className:"text-content-DEFAULT",children:e.dateTime||"N/A"}),x.jsx(le,{children:x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-content-DEFAULT",children:e.name||"N/A"}),x.jsx("div",{className:"text-sm text-content-light",children:e.contact||"N/A"}),e.email&&x.jsx("div",{className:"text-sm text-content-light",children:e.email})]})}),x.jsx(le,{children:x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-content-DEFAULT",children:e.serviceName||"N/A"}),(null==(t=e.optionalServices)?void 0:t.length)>0?x.jsx(ie,{content:x.jsxs("div",{className:"space-y-2",children:[x.jsx("p",{className:"font-medium text-primary-DEFAULT",children:"Optional Services:"}),e.optionalServices.map(((e,s)=>x.jsxs("div",{className:"flex justify-between text-content-DEFAULT",children:[x.jsx("span",{children:e.name}),x.jsxs("span",{className:"text-primary-DEFAULT",children:["$",e.price]})]},s)))]}),children:x.jsxs("div",{className:"text-sm text-primary-DEFAULT hover:text-primary-light cursor-pointer",children:["+",e.optionalServices.length," add-ons"]})}):x.jsx("div",{className:"text-sm text-content-light",children:"No add-ons"})]})}),x.jsx(le,{children:x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-content-DEFAULT",children:e.vehicleType||"N/A"}),x.jsx("div",{className:"text-sm text-content-light",children:e.makeModel||"N/A"})]})}),x.jsx(le,{children:x.jsxs("select",{value:e.status||"pending",onChange:t=>{return r=e._id,l=t.target.value,o(void 0,null,(function*(){const e=s.find((e=>e._id===r));u(e),b(l),v(""),N(!0)}));var r,l},className:`${k(e.status)} px-2 py-1 rounded-lg text-sm border-0 focus:ring-1 focus:ring-primary-light cursor-pointer`,children:[x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"confirmed",children:"Confirmed"}),x.jsx("option",{value:"in_progress",children:"In Progress"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),x.jsxs(le,{className:"font-medium text-content-DEFAULT",children:["$",e.totalPrice||0]})]},e._id||e.confirmationNumber)}))})]})})]})},de=({service:e,onClose:s,onSave:t})=>{var r;const{vehicleTypes:l}=J(),[n,i]=R.useState({name:(null==e?void 0:e.name)||"",features:(null==e?void 0:e.features)||[""],vehiclePricing:(null==e?void 0:e.vehiclePricing)||l.reduce(((e,s)=>d(a({},e),{[s.id]:0})),{}),category:(null==e?void 0:e.category)||"DRIVE-IN",isActive:null==(r=null==e?void 0:e.isActive)||r,sortOrder:(null==e?void 0:e.sortOrder)||0}),[c,m]=R.useState({}),[u,g]=R.useState(!1);return x.jsx("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-background-light rounded-lg w-full max-w-2xl border border-border-DEFAULT shadow-lg flex flex-col max-h-[90vh]",children:[x.jsx("div",{className:"p-6 border-b border-border-DEFAULT",children:x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h2",{className:"text-xl font-medium text-content-dark",children:(null==e?void 0:e._id)?"Edit Service":"Add New Service"}),x.jsx("button",{onClick:s,className:"p-2 hover:bg-background-dark rounded-lg transition-colors",children:x.jsx(h,{className:"w-4 h-4"})})]})}),x.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x.jsxs("form",{onSubmit:r=>o(void 0,null,(function*(){if(r.preventDefault(),(()=>{const e={};return n.name.trim()||(e.name="Service name is required"),n.features.some((e=>e.trim()))||(e.features="At least one feature is required"),Object.values(n.vehiclePricing).some((e=>isNaN(e)||e<0))&&(e.pricing="All pricing values must be valid numbers greater than or equal to 0"),m(e),0===Object.keys(e).length})()&&!u)try{g(!0);const r=(null==e?void 0:e._id)?B.ENDPOINTS.SERVICES.BY_ID(e._id):B.ENDPOINTS.SERVICES.BASE,l=(null==e?void 0:e._id)?yield W.put(r,n):yield W.post(r,n);l.success&&(t(l.data),s())}catch(l){m((e=>d(a({},e),{submit:l.message})))}finally{g(!1)}})),className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Service Name"}),x.jsx("input",{type:"text",value:n.name,onChange:e=>i(d(a({},n),{name:e.target.value})),className:"w-full p-2 bg-background-light border border-border-DEFAULT rounded-lg",placeholder:"Enter service name"}),c.name&&x.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.name})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),x.jsxs("select",{value:n.category,onChange:e=>i(d(a({},n),{category:e.target.value})),className:"w-full p-2 bg-background-light border border-border-DEFAULT rounded-lg",children:[x.jsx("option",{value:"DRIVE-IN",children:"Drive-in"}),x.jsx("option",{value:"APPOINTMENT",children:"Appointment"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Features"}),x.jsxs("div",{className:"space-y-2",children:[n.features.map(((e,s)=>x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:e,onChange:e=>((e,s)=>{const t=[...n.features];t[e]=s,i(d(a({},n),{features:t}))})(s,e.target.value),className:"flex-1 p-2 bg-background-light border border-border-DEFAULT rounded-lg",placeholder:"Feature description"}),x.jsx("button",{type:"button",onClick:()=>(e=>{n.features.length>1&&i(d(a({},n),{features:n.features.filter(((s,t)=>t!==e))}))})(s),className:"p-2 hover:bg-background-dark rounded-lg transition-colors text-red-500",disabled:1===n.features.length,children:x.jsx(T,{className:"w-4 h-4"})})]},s))),x.jsxs("button",{type:"button",onClick:()=>{i(d(a({},n),{features:[...n.features,""]}))},className:"flex items-center gap-2 text-sm text-primary-DEFAULT hover:text-primary-dark",children:[x.jsx(L,{className:"w-4 h-4"}),"Add Feature"]})]}),c.features&&x.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.features})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pricing"}),x.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map((e=>x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-content-light mb-1 capitalize",children:e.label}),x.jsx("input",{type:"number",min:"0",step:"0.01",value:n.vehiclePricing[e.id]||0,onChange:s=>((e,s)=>{i(d(a({},n),{vehiclePricing:d(a({},n.vehiclePricing),{[e]:Number(s)})}))})(e.id,s.target.value),className:"w-full p-2 bg-background-light border border-border-DEFAULT rounded-lg"})]},e.id)))}),c.pricing&&x.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.pricing})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",id:"isActive",checked:n.isActive,onChange:e=>i(d(a({},n),{isActive:e.target.checked})),className:"rounded border-border-DEFAULT bg-background-light"}),x.jsx("label",{htmlFor:"isActive",className:"text-sm",children:"Active"})]}),c.submit&&x.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-lg text-sm",children:c.submit}),x.jsx("div",{className:"p-6 border-t border-border-DEFAULT bg-background-light",children:x.jsxs("div",{className:"flex justify-end gap-4",children:[x.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-border-DEFAULT rounded-lg hover:bg-background-dark",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-primary-light text-white rounded-lg hover:bg-primary-DEFAULT \n                       disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Saving...":(null==e?void 0:e._id)?"Update Service":"Create Service"})]})})]})})]})})},ce=()=>{const{vehicleTypes:e}=J(),[s,t]=R.useState([]),[r,l]=R.useState(!0),[n,i]=R.useState(null),[c,h]=R.useState(!1),[m,u]=R.useState(null);R.useEffect((()=>{o(void 0,null,(function*(){try{l(!0);const e=yield W.get(B.ENDPOINTS.SERVICES.BASE);e.success&&t(e.data)}catch(e){u(e.message)}finally{l(!1)}}))}),[]);return r?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light"})}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-content-dark",children:"Service Management"}),x.jsxs("button",{onClick:()=>{i({name:"",features:[""],vehiclePricing:{sedan:0,"mini-suv":0,suv:0,"van/truck":0}}),h(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-light text-white rounded-lg \n                   hover:bg-primary-DEFAULT transition-colors",children:[x.jsx(L,{className:"w-4 h-4"}),"Add Service"]})]}),x.jsx("div",{className:"w-full overflow-x-auto bg-background-light rounded-lg border border-border-light relative z-0",children:x.jsxs(Z,{children:[x.jsx(ee,{children:x.jsxs(te,{children:[x.jsx(re,{children:"Service Name"}),x.jsx(re,{children:"Features"}),x.jsx(re,{children:"Pricing"}),x.jsx(re,{children:"Status"}),x.jsx(re,{className:"text-right",children:"Actions"})]})}),x.jsx(se,{children:s.map((r=>x.jsxs(te,{children:[x.jsx(le,{className:"font-medium text-content-DEFAULT",children:r.name}),x.jsx(le,{children:x.jsx("ul",{className:"list-disc list-inside",children:r.features.map(((e,s)=>x.jsx("li",{className:"text-sm text-content-light",children:e},s)))})}),x.jsx(le,{children:x.jsx("div",{className:"space-y-1",children:e.map((e=>x.jsxs("div",{className:"text-sm",children:[x.jsxs("span",{className:"text-content-light capitalize",children:[e.label,":"]}),x.jsxs("span",{className:"text-primary-DEFAULT",children:["$",r.vehiclePricing[e.id]||0]})]},e.id)))})}),x.jsx(le,{children:x.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(r.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:r.isActive?"Active":"Inactive"})}),x.jsx(le,{className:"text-right",children:x.jsxs("div",{className:"flex justify-end gap-2",children:[x.jsx("button",{onClick:()=>(e=>{i(e),h(!0)})(r),className:"p-2 hover:bg-background-dark rounded-lg transition-colors text-content-light",children:x.jsx(F,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>{return e=r._id,o(void 0,null,(function*(){if(window.confirm("Are you sure you want to mark this service as inactive?"))try{(yield W.delete(B.ENDPOINTS.SERVICES.BY_ID(e))).success&&t(s.map((s=>s._id===e?d(a({},s),{isActive:!1}):s)))}catch(r){}}));var e},className:"p-2 hover:bg-background-dark rounded-lg transition-colors text-red-500",children:x.jsx(U,{className:"w-4 h-4"})})]})})]},r._id)))})]})}),c&&x.jsx(de,{service:n,onClose:()=>{h(!1),i(null)},onSave:e=>{(null==n?void 0:n._id)?t(s.map((s=>s._id===e._id?e:s))):t([...s,e]),h(!1),i(null)}})]})},oe=()=>{const[e,s]=R.useState("vehicleTypes"),[t,r]=R.useState([]),[l,n]=R.useState([]),[i,c]=R.useState([]),[m,u]=R.useState(null),[g,b]=R.useState({}),[j,v]=R.useState(!0);R.useEffect((()=>{N()}),[]);const p=e=>{const s=(e=>{switch(e){case"vehicle-types":return{id:"",label:"",isActive:!0,sortOrder:0};case"scents":return{id:"",name:"",isActive:!0,sortOrder:0};case"optional-services":return{id:"",name:"",description:"",price:0,isActive:!0,sortOrder:0};default:return{}}})(e);u("new"),b(s)},N=()=>o(void 0,null,(function*(){try{v(!0);const[e,s,t]=yield Promise.all([W.get(B.ENDPOINTS.CONFIG.VEHICLE_TYPES),W.get(B.ENDPOINTS.CONFIG.SCENTS),W.get(B.ENDPOINTS.CONFIG.OPTIONAL_SERVICES)]);r(e.data),n(s.data),c(t.data)}catch(e){}finally{v(!1)}})),f=e=>o(void 0,null,(function*(){try{let s;s="new"===m?yield W.post(B.ENDPOINTS.CONFIG.BASE(e),g):yield W.put(B.ENDPOINTS.CONFIG.BY_ID(e,m),g),s.success&&(yield N(),u(null),b({}))}catch(s){}})),y=(e,s,r)=>o(void 0,null,(function*(){try{const n="vehicle-types"===e?t:"scents"===e?l:i,a=n.findIndex((e=>e._id===s)),d="up"===r?n[a].sortOrder-1:n[a].sortOrder+1;yield W.put(B.ENDPOINTS.CONFIG.BY_ID(e,s),{sortOrder:d}),yield N()}catch(n){}})),k=e=>{u(e._id),b(e)};return j?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light"})}):x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"border-b border-border-light",children:x.jsxs("nav",{className:"flex space-x-8",children:[x.jsx("button",{onClick:()=>s("vehicleTypes"),className:"px-1 py-4 border-b-2 text-sm font-medium "+("vehicleTypes"===e?"border-primary-light text-primary-light":"border-transparent text-content-light hover:text-content-DEFAULT hover:border-border-DEFAULT"),children:"Vehicle Types"}),x.jsx("button",{onClick:()=>s("scents"),className:"px-1 py-4 border-b-2 text-sm font-medium "+("scents"===e?"border-primary-light text-primary-light":"border-transparent text-content-light hover:text-content-DEFAULT hover:border-border-DEFAULT"),children:"Scents"}),x.jsx("button",{onClick:()=>s("optionalServices"),className:"px-1 py-4 border-b-2 text-sm font-medium "+("optionalServices"===e?"border-primary-light text-primary-light":"border-transparent text-content-light hover:text-content-DEFAULT hover:border-border-DEFAULT"),children:"Optional Services"})]})}),x.jsx("div",{className:"mt-6",children:"vehicleTypes"===e&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"Vehicle Types"}),x.jsxs("button",{onClick:()=>p("vehicle-types"),className:"flex items-center gap-2 px-4 py-2 text-sm bg-primary-light text-white rounded-lg hover:bg-primary-DEFAULT transition-colors",children:[x.jsx(L,{className:"w-4 h-4"}),"Add Vehicle Type"]})]}),x.jsx("div",{className:"w-full overflow-x-auto bg-background-light rounded-lg border border-border-light relative z-0",children:x.jsxs(Z,{children:[x.jsx(ee,{children:x.jsxs(te,{children:[x.jsx(re,{children:"Sort"}),x.jsx(re,{children:"ID"}),x.jsx(re,{children:"Label"}),x.jsx(re,{children:"Status"}),x.jsx(re,{children:"Actions"})]})}),x.jsxs(se,{children:["new"===m&&x.jsxs(te,{children:[x.jsx(le,{children:"-"}),x.jsx(le,{children:x.jsx(ne,{type:"text",value:g.id||"",onChange:e=>b(d(a({},g),{id:e.target.value})),placeholder:"Enter ID"})}),x.jsx(le,{children:x.jsx(ne,{type:"text",value:g.label||"",onChange:e=>b(d(a({},g),{label:e.target.value})),placeholder:"Enter Label"})}),x.jsx(le,{children:x.jsxs("select",{value:g.isActive,onChange:e=>b(d(a({},g),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]})}),x.jsx(le,{children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>f("vehicle-types"),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:x.jsx(I,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>{u(null),b({})},className:"p-1 text-red-600 hover:bg-red-50 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]})})]}),t.map((e=>x.jsxs(te,{children:[x.jsx(le,{children:x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>y("vehicle-types",e._id,"up"),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(O,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>y("vehicle-types",e._id,"down"),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(_,{className:"w-4 h-4"})})]})}),x.jsx(le,{children:m===e._id?x.jsx(ne,{value:g.id||"",onChange:e=>b(d(a({},g),{id:e.target.value}))}):e.id}),x.jsx(le,{children:m===e._id?x.jsx(ne,{value:g.label||"",onChange:e=>b(d(a({},g),{label:e.target.value}))}):e.label}),x.jsx(le,{children:m===e._id?x.jsxs("select",{value:g.isActive,onChange:e=>b(d(a({},g),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]}):x.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),x.jsx(le,{children:m===e._id?x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>f("vehicle-types"),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:x.jsx(I,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>u(null),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]}):x.jsx("button",{onClick:()=>k(e),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(F,{className:"w-4 h-4"})})})]},e._id)))]})]})})]})}),x.jsx("div",{className:"mt-6",children:"scents"===e&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"Scents"}),x.jsxs("button",{onClick:()=>p("scents"),className:"flex items-center gap-2 px-4 py-2 text-sm bg-primary-light text-white rounded-lg hover:bg-primary-DEFAULT transition-colors",children:[x.jsx(L,{className:"w-4 h-4"}),"Add Scent"]})]}),x.jsx("div",{className:"w-full overflow-x-auto bg-background-light rounded-lg border border-border-light relative z-0",children:x.jsxs(Z,{children:[x.jsx(ee,{children:x.jsxs(te,{children:[x.jsx(re,{children:"Sort"}),x.jsx(re,{children:"ID"}),x.jsx(re,{children:"Name"}),x.jsx(re,{children:"Status"}),x.jsx(re,{children:"Actions"})]})}),x.jsxs(se,{children:["new"===m&&x.jsxs(te,{children:[x.jsx(le,{children:"-"}),x.jsx(le,{children:x.jsx(ne,{type:"number",value:g.id||"",onChange:e=>b(d(a({},g),{id:parseInt(e.target.value)})),placeholder:"Enter ID"})}),x.jsx(le,{children:x.jsx(ne,{type:"text",value:g.name||"",onChange:e=>b(d(a({},g),{name:e.target.value})),placeholder:"Enter Name"})}),x.jsx(le,{children:x.jsxs("select",{value:g.isActive,onChange:e=>b(d(a({},g),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]})}),x.jsx(le,{children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>f("scents"),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:x.jsx(I,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>{u(null),b({})},className:"p-1 text-red-600 hover:bg-red-50 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]})})]}),l.map((e=>x.jsxs(te,{children:[x.jsx(le,{children:x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>y("scents",e._id,"up"),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(O,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>y("scents",e._id,"down"),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(_,{className:"w-4 h-4"})})]})}),x.jsx(le,{children:m===e._id?x.jsx(ne,{type:"number",value:g.id||"",onChange:e=>b(d(a({},g),{id:parseInt(e.target.value)}))}):e.id}),x.jsx(le,{children:m===e._id?x.jsx(ne,{value:g.name||"",onChange:e=>b(d(a({},g),{name:e.target.value}))}):e.name}),x.jsx(le,{children:m===e._id?x.jsxs("select",{value:g.isActive,onChange:e=>b(d(a({},g),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]}):x.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),x.jsx(le,{children:m===e._id?x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>f("scents"),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:x.jsx(I,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>u(null),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]}):x.jsx("button",{onClick:()=>k(e),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(F,{className:"w-4 h-4"})})})]},e._id)))]})]})})]})}),x.jsx("div",{className:"mt-6",children:"optionalServices"===e&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"Optional Services"}),x.jsxs("button",{onClick:()=>p("optional-services"),className:"flex items-center gap-2 px-4 py-2 text-sm bg-primary-light text-white rounded-lg hover:bg-primary-DEFAULT transition-colors",children:[x.jsx(L,{className:"w-4 h-4"}),"Add Optional Service"]})]}),x.jsx("div",{className:"w-full overflow-x-auto bg-background-light rounded-lg border border-border-light relative z-0",children:x.jsxs(Z,{children:[x.jsx(ee,{children:x.jsxs(te,{children:[x.jsx(re,{children:"Sort"}),x.jsx(re,{children:"ID"}),x.jsx(re,{children:"Name"}),x.jsx(re,{children:"Description"}),x.jsx(re,{children:"Price"}),x.jsx(re,{children:"Status"}),x.jsx(re,{children:"Actions"})]})}),x.jsxs(se,{children:["new"===m&&x.jsxs(te,{children:[x.jsx(le,{children:"-"}),x.jsx(le,{children:x.jsx(ne,{type:"number",value:g.id||"",onChange:e=>b(d(a({},g),{id:parseInt(e.target.value)})),placeholder:"Enter ID"})}),x.jsx(le,{children:x.jsx(ne,{type:"text",value:g.name||"",onChange:e=>b(d(a({},g),{name:e.target.value})),placeholder:"Enter Name"})}),x.jsx(le,{children:x.jsx(ne,{type:"text",value:g.description||"",onChange:e=>b(d(a({},g),{description:e.target.value})),placeholder:"Enter Description"})}),x.jsx(le,{children:x.jsx(ne,{type:"number",value:g.price||"",onChange:e=>b(d(a({},g),{price:parseFloat(e.target.value)})),placeholder:"Enter Price"})}),x.jsx(le,{children:x.jsxs("select",{value:g.isActive,onChange:e=>b(d(a({},g),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]})}),x.jsx(le,{children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>f("optional-services"),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:x.jsx(I,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>{u(null),b({})},className:"p-1 text-red-600 hover:bg-red-50 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]})})]}),i.map((e=>x.jsxs(te,{children:[x.jsx(le,{children:x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>y("optional-services",e._id,"up"),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(O,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>y("optional-services",e._id,"down"),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(_,{className:"w-4 h-4"})})]})}),x.jsx(le,{children:m===e._id?x.jsx(ne,{type:"number",value:g.id||"",onChange:e=>b(d(a({},g),{id:parseInt(e.target.value)}))}):e.id}),x.jsx(le,{children:m===e._id?x.jsx(ne,{value:g.name||"",onChange:e=>b(d(a({},g),{name:e.target.value}))}):e.name}),x.jsx(le,{children:m===e._id?x.jsx(ne,{value:g.description||"",onChange:e=>b(d(a({},g),{description:e.target.value}))}):e.description}),x.jsx(le,{children:m===e._id?x.jsx(ne,{type:"number",value:g.price||"",onChange:e=>b(d(a({},g),{price:parseFloat(e.target.value)}))}):`$${e.price}`}),x.jsx(le,{children:m===e._id?x.jsxs("select",{value:g.isActive,onChange:e=>b(d(a({},g),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]}):x.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),x.jsx(le,{children:m===e._id?x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>f("optional-services"),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:x.jsx(I,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>u(null),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]}):x.jsx("button",{onClick:()=>k(e),className:"p-1 hover:bg-background-dark rounded",children:x.jsx(F,{className:"w-4 h-4"})})})]},e._id)))]})]})})]})})]})},xe=({children:e})=>{const{user:s,loading:t}=P();return t?x.jsx("div",{children:"Loading..."}):s?e:x.jsx(q,{to:"/login"})},he=()=>x.jsx(z,{children:x.jsx(H,{children:x.jsxs(K,{element:x.jsx(xe,{children:x.jsx(Q,{})}),children:[x.jsx(K,{index:!0,element:x.jsx(X,{})}),x.jsx(K,{path:"/dashboard",element:x.jsx(X,{})}),x.jsx(K,{path:"/bookings",element:x.jsx(ae,{})}),x.jsx(K,{path:"/services",element:x.jsx(ce,{})}),x.jsx(K,{path:"/config",element:x.jsx(oe,{})})]})})});export{he as default};
