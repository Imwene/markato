var e=(e,t,n)=>new Promise(((s,a)=>{var r=e=>{try{o(n.next(e))}catch(t){a(t)}},i=e=>{try{o(n.throw(e))}catch(t){a(t)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,i);o((n=n.apply(e,t)).next())}));import{j as t,J as n,w as s,r as a,e as r}from"../vendor/ui-vendor-gM8F1IDR.js";import{e as i,r as o,u as l}from"../vendor/react-vendor-C2p5b_me.js";import{C as c}from"../index-CsNTKv9N.js";import"../vendor/auth-vendor-sPk1YpsG.js";const d=()=>{const{confirmationNumber:d,email:x}=i(),[m,h]=o.useState(null),[u,g]=o.useState(!0),[b,k]=o.useState(null),[p,j]=o.useState(!1),f=l();o.useEffect((()=>{e(void 0,null,(function*(){try{const e=yield fetch(`${c.API_URL}/bookings/check-cancellation/${d}/${x}`),t=yield e.json();t.success?h(t.booking):k(t.error)}catch(e){k("Failed to fetch booking details")}finally{g(!1)}}))}),[d,x]);return u?t.jsx("div",{className:"flex justify-center items-center min-h-screen",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light dark:border-orange-500"})}):b?t.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:t.jsxs("div",{className:"max-w-md w-full text-center",children:[t.jsx("div",{className:"mb-6",children:t.jsx(n,{className:"mx-auto h-16 w-16 text-red-500"})}),t.jsx("h1",{className:"text-2xl font-bold text-content-dark dark:text-white mb-4",children:"Unable to Process Request"}),t.jsx("p",{className:"text-content-light dark:text-stone-400 mb-6",children:b}),t.jsx("button",{onClick:()=>f("/"),className:"px-6 py-3 bg-primary-light dark:bg-orange-500 text-white rounded-lg \n                     hover:bg-primary-DEFAULT dark:hover:bg-orange-600 transition-colors",children:"Return Home"})]})}):p?t.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:t.jsxs("div",{className:"max-w-md w-full text-center",children:[t.jsx("div",{className:"mb-6",children:t.jsx(s,{className:"mx-auto h-16 w-16 text-green-500"})}),t.jsx("h1",{className:"text-2xl font-bold text-content-dark dark:text-white mb-4",children:"Booking Cancelled Successfully"}),t.jsx("p",{className:"text-content-light dark:text-stone-400 mb-6",children:"Your booking has been cancelled. You will receive a confirmation email shortly."}),t.jsx("button",{onClick:()=>f("/"),className:"px-6 py-3 bg-primary-light dark:bg-orange-500 text-white rounded-lg \n                     hover:bg-primary-DEFAULT dark:hover:bg-orange-600 transition-colors",children:"Book Another Service"})]})}):t.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:t.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl w-full bg-white dark:bg-stone-800 rounded-lg shadow-lg p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-content-dark dark:text-white mb-6",children:"Cancel Your Booking"}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(r,{className:"w-5 h-5 text-primary-light dark:text-orange-500 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-content-dark dark:text-white",children:"Appointment Details"}),t.jsx("p",{className:"text-content-light dark:text-stone-400",children:m.dateTime})]})]}),t.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/30 rounded-lg",children:[t.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium",children:"Warning: This action cannot be undone"}),t.jsx("p",{className:"text-sm text-red-500 dark:text-red-300 mt-1",children:"Cancelling this booking will immediately free up this time slot for other customers."})]})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:()=>e(void 0,null,(function*(){try{g(!0);const e=yield fetch(`${c.API_URL}/bookings/cancel/${d}/${x}`,{method:"POST",headers:{"Content-Type":"application/json"}}),t=yield e.json();t.success?j(!0):k(t.error)}catch(e){k("Failed to cancel booking")}finally{g(!1)}})),className:"flex-1 px-6 py-3 bg-red-500 text-white rounded-lg \n                     hover:bg-red-600 transition-colors",children:"Cancel Booking"}),t.jsx("button",{onClick:()=>window.history.back(),className:"flex-1 px-6 py-3 bg-background-DEFAULT dark:bg-stone-700 \n                     text-content-DEFAULT dark:text-white rounded-lg \n                     hover:bg-background-dark dark:hover:bg-stone-600 \n                     transition-colors",children:"Go Back"})]})]})})};export{d as default};
