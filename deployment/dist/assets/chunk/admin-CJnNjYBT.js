var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,d=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))a.call(t,r)&&l(e,r,t[r]);return e},i=(e,s)=>t(e,r(s)),o=(e,t)=>{var r={};for(var l in e)n.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&s)for(var l of s(e))t.indexOf(l)<0&&a.call(e,l)&&(r[l]=e[l]);return r},c=(e,t,r)=>new Promise(((s,n)=>{var a=e=>{try{d(r.next(e))}catch(t){n(t)}},l=e=>{try{d(r.throw(e))}catch(t){n(t)}},d=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,l);d((r=r.apply(e,t)).next())}));import{j as x,X as h,c as m,C as g,L as u,d as b,e as p,f as v,g as j,h as k,A as N,P as f,i as y,U as w,k as S,W as A,l as D,H as E,m as T,n as C,T as L,o as F,p as U,q as I}from"../vendor/ui-vendor-CxT9egSK.js";import{C as O,u as P,S as _}from"../index-hMSveWQE.js";import{r as $,b as M,u as B,L as z,O as q,d as R,R as V,c as G,N as W}from"../vendor/react-vendor-C2p5b_me.js";import{u as H,a as K,f as Y,b as J}from"./dateUtils-CgpWY0nb.js";import"../vendor/auth-vendor-sPk1YpsG.js";const Z={fetch:(e,...t)=>c(void 0,[e,...t],(function*(e,t={}){try{let r=d({"Content-Type":"application/json"},t.headers);if(!t.public){const e=JSON.parse(localStorage.getItem("user"));if(!(null==e?void 0:e.token))throw new Error("No authentication token available");r.Authorization=`Bearer ${e.token}`}const s=yield fetch(`${O.API_URL}${e}`,i(d({},t),{headers:r}));if(401===s.status&&!t.public)throw localStorage.removeItem("user"),new Error("Authentication token invalid");const n=yield s.json();if(!s.ok)throw new Error(n.error||"API request failed");return n}catch(r){throw r}})),get:(e,t={})=>Z.fetch(e,d({method:"GET"},t)),post:(e,t,r={})=>Z.fetch(e,d({method:"POST",body:JSON.stringify(t)},r)),put:(e,t,r={})=>Z.fetch(e,d({method:"PUT",body:JSON.stringify(t)},r)),delete:(e,t={})=>Z.fetch(e,d({method:"DELETE"},t))},Q=()=>{var e;const[t,r]=$.useState(!0),[s,n]=$.useState(window.innerWidth<1024),a=M(),l=B(),{user:d,logout:i}=P(),o=[{icon:x.jsx(b,{size:20}),label:"Dashboard",path:"/admin",description:"Overview of your business"},{icon:x.jsx(p,{size:20}),label:"Bookings",path:"/admin/bookings",description:"Manage customer bookings"},{icon:x.jsx(v,{size:20}),label:"Services",path:"/admin/services",description:"Configure available services"},{icon:x.jsx(j,{size:20}),label:"Configurations",path:"/admin/config",description:"System settings and options"}];$.useEffect((()=>{d||l("/login")}),[d,l]),$.useEffect((()=>{const e=()=>{n(window.innerWidth<1024),window.innerWidth>=1024&&r(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),$.useEffect((()=>{s&&r(!1)}),[a.pathname,s]);const k=e=>a.pathname===e;return x.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-stone-900",children:[x.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 \n        bg-background-light dark:bg-stone-900 \n        border-b border-border-light dark:border-stone-800 \n        px-4 py-3 flex items-center",children:[x.jsx("button",{onClick:()=>r(!t),className:"p-2 hover:bg-background-dark dark:hover:bg-stone-800 rounded-lg\n          text-content-DEFAULT dark:text-white transition-colors","aria-label":t?"Close menu":"Open menu",children:t?x.jsx(h,{size:24}):x.jsx(m,{size:24})}),x.jsx("span",{className:"ml-4 font-semibold text-content-dark dark:text-white",children:(null==(e=o.find((e=>k(e.path))))?void 0:e.label)||"Admin Panel"})]}),s&&t&&x.jsx("div",{className:"fixed inset-0 bg-black/20 z-30",onClick:()=>r(!1)}),x.jsxs("div",{className:`\n    fixed top-0 left-0 h-full w-64 \n    bg-white dark:bg-stone-900 \n    border-r border-border-light dark:border-stone-800\n    transition-all duration-300 ease-in-out\n    z-40 lg:z-30\n    ${t?"translate-x-0":"-translate-x-full"}\n    ${s?"shadow-xl":""}\n    lg:translate-x-0\n  `,children:[x.jsxs("div",{className:"p-6 border-b border-border-light dark:border-stone-800 bg-white dark:bg-stone-900",children:[x.jsx("h1",{className:"text-2xl font-bold text-primary-light dark:text-orange-500",children:"Admin Panel"}),x.jsx("p",{className:"text-sm text-content-light dark:text-stone-400",children:"Manage your services and bookings"})]}),x.jsxs("nav",{className:"mt-6 flex flex-col h-[calc(100%-160px)] bg-white dark:bg-stone-900",children:[x.jsx("div",{className:"flex-1",children:o.map((e=>x.jsxs(z,{to:e.path,className:`\n            group flex items-center gap-3 px-6 py-3 text-sm transition-all relative\n            hover:bg-gray-50 dark:hover:bg-stone-800\n            ${k(e.path)?"bg-primary-light/10 text-primary-dark border-r-2 border-primary-light dark:bg-orange-500/10 dark:text-orange-500 dark:border-orange-500":"text-content-DEFAULT dark:text-stone-400"}\n          `,children:[x.jsxs("span",{className:"flex items-center gap-3",children:[e.icon,e.label]}),x.jsx(g,{className:`w-4 h-4 ml-auto opacity-0 group-hover:opacity-100 transition-opacity\n                    ${k(e.path)?"text-primary-light dark:text-orange-500":""}\n                  `})]},e.path)))}),d&&x.jsxs("button",{onClick:()=>c(void 0,null,(function*(){window.confirm("Are you sure you want to logout?")&&(yield i(),l("/login"))})),className:"flex items-center gap-3 px-6 py-3 text-sm \n          text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 \n          transition-colors mt-auto mb-6",children:[x.jsx(u,{size:20}),"Logout"]})]})]}),x.jsx("div",{className:`\n          transition-all duration-300\n          ${s?"pt-16":""}\n          ${t&&!s?"lg:ml-64":""}\n        `,children:x.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:x.jsx(q,{})})})]})},X=()=>{const[e,t]=$.useState([]),[r,s]=$.useState(new Date),[n,a]=$.useState(!0),[l,d]=$.useState((new Date).getDay());$.useEffect((()=>{i()}),[r]);const i=()=>c(void 0,null,(function*(){try{a(!0);const e=o(r),s=h(r),n=yield Z.get(`${O.ENDPOINTS.ADMIN.BOOKINGS.WEEKLY}?startDate=${e.toISOString()}&endDate=${s.toISOString()}`);n.success&&t(n.data)}catch(e){}finally{a(!1)}})),o=e=>{const t=new Date(e);return t.setDate(t.getDate()-t.getDay()),t.setHours(0,0,0,0),t},h=e=>{const t=new Date(e);return t.setDate(t.getDate()-t.getDay()+6),t.setHours(23,59,59,999),t},m=e=>{const t=new Date(r);t.setDate(t.getDate()+("next"===e?7:-7)),s(t)},u=e=>{d("next"===e?(l+1)%7:(l-1+7)%7)},b=e=>{var t,r;return x.jsxs("div",{className:"p-3 rounded-lg bg-background-DEFAULT dark:bg-stone-800 border border-border-light dark:border-stone-700",children:[x.jsx("p",{className:"text-sm font-medium text-content-dark dark:text-white mb-1",children:new Date(e.dateTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}),x.jsxs("p",{className:"text-sm text-content-DEFAULT dark:text-stone-300",children:[e.name," • ",e.confirmationNumber]}),x.jsx("p",{className:"text-xs text-content-light dark:text-stone-400",children:e.contact}),x.jsxs("p",{className:"text-xs text-content-light dark:text-stone-400",children:[e.vehicleType," - ",e.makeModel]}),x.jsxs("p",{className:"text-xs text-content-light dark:text-stone-400",children:[e.serviceName," - $",e.servicePrice," • Scent: ",e.selectedScent]}),(null==(t=e.optionalServices)?void 0:t.length)>0&&x.jsxs("div",{className:"mt-2 pt-2 border-t border-border-light dark:border-stone-700",children:[x.jsx("p",{className:"text-xs font-medium text-content-DEFAULT dark:text-stone-300",children:"Add-ons:"}),e.optionalServices.map(((e,t)=>x.jsxs("p",{className:"text-xs text-content-light dark:text-stone-400 ml-2",children:["• ",e.name," ($",e.price,")"]},t)))]}),x.jsx("span",{className:`inline-flex items-center px-2 py-0.5 mt-2 text-xs font-medium rounded-full ${r=e.status,{pending:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",confirmed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}[null==r?void 0:r.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}`,children:e.status})]})},v=t=>{const r=(t=>e.filter((e=>new Date(e.dateTime).toDateString()===t.toDateString())).sort(((e,t)=>new Date(e.dateTime).getTime()-new Date(t.dateTime).getTime())))(t);return x.jsxs("div",{className:"flex-1 min-w-[300px] p-4 border-r last:border-r-0 border-border-light dark:border-stone-700",children:[x.jsx("h3",{className:"font-medium text-content-dark dark:text-white mb-2",children:t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),x.jsx("div",{className:"space-y-3",children:r.length>0?r.map(((e,t)=>x.jsx("div",{children:b(e)},t))):x.jsxs("div",{className:"flex flex-col items-center justify-center py-4 text-content-light dark:text-stone-400",children:[x.jsx(p,{className:"w-5 h-5 mb-1 opacity-50"}),x.jsx("span",{className:"text-sm",children:"No appointments"})]})})]})};if(n)return x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light dark:border-orange-500"})});const j=o(r),N=Array.from({length:7},((e,t)=>{const r=new Date(j);return r.setDate(j.getDate()+t),r}));return x.jsxs("div",{className:"bg-background-light dark:bg-stone-800 rounded-lg border border-border-light dark:border-stone-700",children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-light dark:border-stone-700",children:[x.jsx("h3",{className:"text-xl font-bold text-content-dark dark:text-white",children:"Weekly Appointments"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:()=>m("prev"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors",children:x.jsx(k,{className:"w-5 h-5"})}),x.jsx("button",{onClick:()=>m("next"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors",children:x.jsx(g,{className:"w-5 h-5"})})]})]}),x.jsx("div",{className:"hidden md:block p-4",children:x.jsx("div",{className:"overflow-x-auto",children:x.jsx("div",{className:"flex min-w-[2100px]",children:N.map(((e,t)=>x.jsx("div",{className:"flex-1",children:v(e)},t)))})})}),x.jsxs("div",{className:"md:hidden",children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-light dark:border-stone-700",children:[x.jsx("button",{onClick:()=>u("prev"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors",children:x.jsx(k,{className:"w-5 h-5"})}),x.jsx("h4",{className:"font-medium",children:N[l].toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),x.jsx("button",{onClick:()=>u("next"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors",children:x.jsx(g,{className:"w-5 h-5"})})]}),x.jsx("div",{className:"p-4",children:v(N[l])})]})]})},ee=({onClose:e,onSuccess:t})=>{var r;const{vehicleTypes:s,scents:n,optionalServices:a}=H(),{services:l}=K(),[o,m]=$.useState({}),[g,u]=$.useState(!1),[b,p]=$.useState(null),[v,j]=$.useState({name:"",contact:"",email:"",makeModel:"",vehicleType:(null==(r=s[0])?void 0:r.id)||"",serviceId:"",selectedScent:"",time:"",optionalServices:[]}),[k,f]=$.useState({}),y=(new Date).toLocaleString("en-US",{timeZone:"America/Los_Angeles"}),w=Y(new Date(y)),S=["9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"];$.useEffect((()=>{A()}),[]);const A=()=>c(void 0,null,(function*(){try{u(!0);const e=new Date(w),t=new Date(w);t.setHours(23,59,59,999);const r=yield Z.get(`${O.ENDPOINTS.ADMIN.BOOKINGS.WEEKLY}?startDate=${e.toISOString()}&endDate=${t.toISOString()}`);if(r.success){const e={};S.forEach((t=>{e[t]={count:r.data.filter((e=>new Date(e.dateTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})===t)).length}})),m(e)}}catch(e){p("Failed to load time slot information")}finally{u(!1)}})),D=e=>{const{name:t,value:r}=e.target;j((e=>i(d({},e),{[t]:r}))),k[t]&&f((e=>i(d({},e),{[t]:null})))},E=l.find((e=>e._id===v.serviceId));return x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-background-light dark:bg-stone-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[x.jsx("div",{className:"p-6 border-b border-border-light dark:border-stone-700",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h2",{className:"text-xl font-semibold text-content-dark dark:text-white",children:"Create Walk-in Booking"}),x.jsx("button",{onClick:e,className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors",children:x.jsx(h,{className:"w-5 h-5"})})]})}),x.jsxs("form",{onSubmit:r=>c(void 0,null,(function*(){var s,d;if(r.preventDefault(),(()=>{var e,t,r,s;const n={};return(null==(e=v.name)?void 0:e.trim())||(n.name="Name is required"),(null==(t=v.contact)?void 0:t.trim())?/^(\+?1)?[-.\s]?\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}$/.test(v.contact)||(n.contact="Invalid phone number format"):n.contact="Contact number is required",(null==(r=v.email)?void 0:r.trim())?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.email)||(n.email="Invalid email format"):n.email="Email is required",(null==(s=v.makeModel)?void 0:s.trim())||(n.makeModel="Vehicle make/model is required"),v.vehicleType||(n.vehicleType="Vehicle type is required"),v.serviceId||(n.serviceId="Service is required"),v.selectedScent||(n.selectedScent="Scent selection is required"),v.time||(n.time="Time slot is required"),f(n),0===Object.keys(n).length})())try{u(!0),p(null);const r=(null==(s=o[v.time])?void 0:s.count)||0;if(r>0){if(!window.confirm(`There are already ${r} booking(s) in this time slot. Do you want to proceed?`))return void u(!1)}const i=l.find((e=>e._id===v.serviceId));if(!i)throw new Error("Service not found");const c=n.find((e=>e.id.toString()===v.selectedScent.toString()));if(!c)throw new Error("Selected scent not found");const x=i.vehiclePricing[v.vehicleType],h=v.optionalServices.map((e=>{const t=a.find((t=>t.id.toString()===e.toString()));if(!t)throw new Error(`Optional service not found: ${e}`);return{serviceId:t.id,name:t.name,price:parseFloat(t.price)}})),m=x+h.reduce(((e,t)=>e+t.price),0),g=new Date,b=`${(g.getMonth()+1).toString().padStart(2,"0")}${g.getDate().toString().padStart(2,"0")}${g.getFullYear().toString()}`,j=`BK-${b}-${Math.floor(1e4*Math.random()).toString().padStart(4,"0")}`,k=new Date(w),N=J(k,v.time),f={name:v.name.trim(),contact:v.contact.trim(),email:null==(d=v.email)?void 0:d.trim(),vehicleType:v.vehicleType,makeModel:v.makeModel.trim(),dateTime:N,serviceId:i._id,serviceName:i.name,selectedScent:c.name,servicePrice:x,features:i.features||[],optionalServices:h,totalPrice:m,confirmationNumber:j,status:"pending"},y=yield Z.post(O.ENDPOINTS.BOOKINGS.BASE,f);y.success&&(t(y.data),e())}catch(i){p(i.message||"Failed to create booking")}finally{u(!1)}})),className:"p-6 space-y-6",children:[b&&x.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg flex items-center gap-2",children:[x.jsx(N,{className:"w-5 h-5"}),x.jsx("p",{children:b})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Vehicle Type"}),x.jsxs("select",{name:"vehicleType",value:v.vehicleType,onChange:D,className:"w-full p-2 rounded-lg border border-border-DEFAULT bg-background-light dark:bg-stone-800",children:[x.jsx("option",{value:"",children:"Select Type"}),s.map((e=>x.jsx("option",{value:e.id,children:e.label},e.id)))]}),k.vehicleType&&x.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.vehicleType})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Make & Model"}),x.jsx("input",{type:"text",name:"makeModel",value:v.makeModel,onChange:D,className:"w-full p-2 rounded-lg border border-border-DEFAULT bg-background-light dark:bg-stone-800",placeholder:"e.g., Toyota Camry"}),k.makeModel&&x.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.makeModel})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Service"}),x.jsxs("select",{name:"serviceId",value:v.serviceId,onChange:D,className:"w-full p-2 rounded-lg border border-border-DEFAULT bg-background-light dark:bg-stone-800",children:[x.jsx("option",{value:"",children:"Select Service"}),l.map((e=>x.jsxs("option",{value:e._id,children:[e.name," - $",e.vehiclePricing[v.vehicleType]||"N/A"]},e._id)))]}),k.serviceId&&x.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.serviceId})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time Slot"}),x.jsxs("select",{name:"time",value:v.time,onChange:D,className:"w-full p-2 rounded-lg border border-border-DEFAULT bg-background-light dark:bg-stone-800",children:[x.jsx("option",{value:"",children:"Select Time"}),S.map((e=>{var t;const r=(null==(t=o[e])?void 0:t.count)||0,s=r>0?"font-semibold text-amber-500 dark:text-amber-400":"";return x.jsxs("option",{value:e,className:s,children:[e," ",r>0?`(${r} existing)`:"(empty)"]},e)}))]}),k.time&&x.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.time})]}),E&&x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Scent Selection"}),x.jsxs("select",{name:"selectedScent",value:v.selectedScent,onChange:D,className:"w-full p-2 rounded-lg border border-border-DEFAULT bg-background-light dark:bg-stone-800",children:[x.jsx("option",{value:"",children:"Select Scent"}),n.map((e=>{var t;return x.jsx("option",{value:null==(t=e.id)?void 0:t.toString(),children:e.name},e.id)}))]}),k.selectedScent&&x.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.selectedScent})]}),E&&x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Optional Services"}),x.jsx("div",{className:"space-y-2",children:a.map((e=>{var t;return x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:v.optionalServices.includes(null==(t=e.id)?void 0:t.toString()),onChange:()=>{var t,r;return r=null==(t=e.id)?void 0:t.toString(),void j((e=>{const t=e.optionalServices.includes(r)?e.optionalServices.filter((e=>e!==r)):[...e.optionalServices,r];return i(d({},e),{optionalServices:t})}))},className:"rounded border-border-DEFAULT"}),x.jsxs("span",{children:[e.name," - $",e.price]})]},e.id)}))})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Customer Name"}),x.jsx("input",{type:"text",name:"name",value:v.name,onChange:D,className:"w-full p-2 rounded-lg border border-border-DEFAULT bg-background-light dark:bg-stone-800",placeholder:"Full Name"}),k.name&&x.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.name})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Contact Number"}),x.jsx("input",{type:"tel",name:"contact",value:v.contact,onChange:D,className:"w-full p-2 rounded-lg border border-border-DEFAULT bg-background-light dark:bg-stone-800",placeholder:"(123) 456-7890"}),k.contact&&x.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.contact})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),x.jsx("input",{type:"email",name:"email",value:v.email,onChange:D,className:"w-full p-2 rounded-lg border border-border-DEFAULT bg-background-light dark:bg-stone-800",placeholder:"customer@example.com",required:!0}),k.email&&x.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.email})]}),x.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-border-light dark:border-stone-700",children:[x.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-content-DEFAULT dark:text-white \n                       bg-background-DEFAULT dark:bg-stone-700\n                       hover:bg-background-dark dark:hover:bg-stone-600\n                       border border-border-DEFAULT dark:border-stone-600\n                       rounded-lg transition-colors",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-primary-light dark:bg-orange-500 \n                       text-white rounded-lg \n                       hover:bg-primary-DEFAULT dark:hover:bg-orange-600 \n                       transition-colors disabled:opacity-50",children:g?"Creating...":"Create Booking"})]})]})]})})},te=()=>{var e,t;const[r,s]=$.useState({totalBookings:0,pendingBookings:0,completedBookings:0,popularOptionalServices:[],popularScents:[]}),[n,a]=$.useState(!0),[l,d]=$.useState(null),[i,o]=$.useState(!1),h=B();$.useEffect((()=>{m()}),[]);const m=()=>c(void 0,null,(function*(){try{a(!0),d(null);const e=yield Z.get(O.ENDPOINTS.ADMIN.DASHBOARD);e.success&&s(e.stats)}catch(e){"No token, authorization denied"===e.message?h("/login"):d(e.message)}finally{a(!1)}})),g=({title:e,value:t,icon:r})=>x.jsx("div",{className:"bg-background-light dark:bg-stone-800 p-6 rounded-lg border border-border-light dark:border-stone-700",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-content-light dark:text-stone-400 text-sm",children:e}),x.jsx("p",{className:"text-2xl font-bold text-content-dark dark:text-white mt-2",children:t})]}),x.jsx("div",{className:"p-3 bg-primary-light/10 dark:bg-orange-500/10 rounded-lg",children:x.jsx(r,{className:"w-5 h-5 text-primary-DEFAULT dark:text-orange-500"})})]})});return n?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light dark:border-orange-500"})}):l?x.jsx("div",{className:"text-red-500 text-center p-4 bg-red-50 rounded-lg",children:l}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 items-start sm:items-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-content-dark dark:text-white",children:"Dashboard"}),x.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[x.jsx("button",{onClick:()=>o(!0),className:"flex-1 sm:flex-none px-4 py-2 text-sm \n                     bg-primary-light text-white rounded-lg \n                     hover:bg-primary-DEFAULT transition-colors\n                     dark:bg-orange-500 dark:hover:bg-orange-600",children:x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx(f,{className:"w-4 h-4"}),x.jsx("span",{className:"hidden sm:inline",children:"New Walk-in"}),x.jsx("span",{className:"sm:hidden",children:"Walk-in"})]})}),x.jsxs("button",{onClick:m,className:"flex-1 sm:flex-none px-4 py-2 text-sm bg-primary-light text-white rounded-lg hover:bg-primary-DEFAULT transition-colors",children:[x.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"}),x.jsx("span",{className:"sm:hidden",children:"Refresh"})]}),x.jsxs("button",{onClick:()=>c(void 0,null,(function*(){if(window.confirm("Are you sure you want to delete ALL bookings? This action cannot be undone."))try{(yield Z.delete(O.ENDPOINTS.ADMIN.BOOKINGS.DELETE_ALL)).success&&(yield m(),alert("All bookings have been deleted successfully"))}catch(e){alert("Failed to delete bookings")}})),className:"flex-1 sm:flex-none px-4 py-2 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[x.jsx("span",{className:"hidden sm:inline",children:"Delete All Bookings"}),x.jsx("span",{className:"sm:hidden",children:"Delete All"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[x.jsx(g,{title:"Total Bookings",value:r.totalBookings,icon:p}),x.jsx(g,{title:"Pending Bookings",value:r.pendingBookings,icon:y}),x.jsx(g,{title:"Completed Bookings",value:r.completedBookings,icon:w})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"bg-background-light dark:bg-stone-800 rounded-lg p-6 border border-border-light dark:border-stone-700",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4 text-content-dark dark:text-white",children:"Popular Optional Services"}),x.jsx("div",{className:"space-y-4",children:null==(e=r.popularOptionalServices)?void 0:e.map(((e,t)=>x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-xl font-bold text-content-dark dark:text-white",children:t+1}),x.jsx("span",{className:"text-content-DEFAULT dark:text-white",children:e.name})]}),x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx(S,{className:"w-4 h-4 text-yellow-400"}),x.jsx("span",{className:"text-content-light dark:text-stone-400",children:e.popularity})]})]},e.name)))})]}),x.jsxs("div",{className:"bg-background-light dark:bg-stone-800 rounded-lg p-6 border border-border-light dark:border-stone-700",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4 text-content-dark dark:text-white",children:"Popular Scents"}),x.jsx("div",{className:"space-y-4",children:null==(t=r.popularScents)?void 0:t.map(((e,t)=>x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-xl font-bold text-content-dark dark:text-white",children:t+1}),x.jsx("span",{className:"text-content-DEFAULT dark:text-white",children:e.name})]}),x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx(A,{className:"w-4 h-4 text-blue-500"}),x.jsx("span",{className:"text-content-light dark:text-stone-400",children:e.popularity})]})]},e.name)))})]})]}),x.jsx("div",{className:"mt-6",children:x.jsx(X,{})}),i&&x.jsx(ee,{onClose:()=>o(!1),onSuccess:()=>{m(),o(!1)}})]})},re=e=>{var t=e,{children:r,className:s=""}=t,n=o(t,["children","className"]);return x.jsx("table",i(d({className:`w-full caption-bottom text-sm ${s}`},n),{children:r}))},se=e=>{var t=e,{children:r,className:s=""}=t,n=o(t,["children","className"]);return x.jsx("thead",i(d({className:`border-b border-border-DEFAULT bg-background-dark \n  dark:border-stone-800 dark:bg-stone-900${s}`},n),{children:r}))},ne=e=>{var t=e,{children:r,className:s=""}=t,n=o(t,["children","className"]);return x.jsx("tbody",i(d({className:`${s}`},n),{children:r}))},ae=e=>{var t=e,{children:r,className:s=""}=t,n=o(t,["children","className"]);return x.jsx("tr",i(d({className:`\n    border-b border-border-light \n    dark:border-stone-800\n    transition-colors \n    hover:bg-background-dark/50\n    dark:hover:bg-stone-800/50\n      ${s}\n    `},n),{children:r}))},le=e=>{var t=e,{children:r,className:s=""}=t,n=o(t,["children","className"]);return x.jsx("th",i(d({className:`\n    h-12 px-4 \n    text-left align-middle \n    font-medium \n    text-content-light\n    dark:text-stone-400\n      ${s}\n    `},n),{children:r}))},de=e=>{var t=e,{children:r,className:s=""}=t,n=o(t,["children","className"]);return x.jsx("td",i(d({className:`\n    p-4 \n    align-middle \n    text-content-DEFAULT\n    dark:text-white\n      ${s}\n    `},n),{children:r}))},ie=R.forwardRef(((e,t)=>{var r=e,{className:s="",type:n="text"}=r,a=o(r,["className","type"]);return x.jsx("input",d({type:n,className:`flex h-10 w-full rounded-md \n      border border-border-DEFAULT dark:border-stone-700\n  bg-background-light dark:bg-stone-800\n  px-3 py-2 text-sm text-content-DEFAULT dark:text-white\n  file:border-0 file:bg-transparent file:text-sm file:font-medium\n  placeholder:text-content-light dark:placeholder:text-stone-500\n  focus-visible:outline-none focus-visible:ring-2 \n  focus-visible:ring-primary-light dark:focus-visible:ring-orange-500 \n  focus-visible:ring-offset-2\n  disabled:cursor-not-allowed disabled:opacity-50\n  hover:border-border-dark dark:hover:border-stone-600\n      ${s}`,ref:t},a))}));ie.displayName="Input";const oe=({children:e,content:t})=>{const[r,s]=$.useState(!1),[n,a]=$.useState({top:0,left:0}),l=$.useRef(null),d=$.useRef(null),i=()=>{if(r&&l.current&&d.current){const e=d.current.getBoundingClientRect(),t=l.current.getBoundingClientRect();let r=e.bottom+10,s=e.left;s+t.width>window.innerWidth&&(s=window.innerWidth-t.width-10),r+t.height>window.innerHeight&&(r=e.top-t.height-10),a({top:r,left:Math.max(10,s)})}};return $.useEffect((()=>{if(r)return i(),window.addEventListener("resize",i),window.addEventListener("scroll",i),()=>{window.removeEventListener("resize",i),window.removeEventListener("scroll",i)}}),[r]),x.jsxs("div",{className:"relative inline-block",ref:d,children:[x.jsx("div",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),className:"cursor-pointer",children:e}),r&&x.jsx("div",{ref:l,style:{position:"fixed",top:`${n.top}px`,left:`${n.left}px`},className:"z-50 w-64 p-2 text-sm bg-background-light dark:bg-stone-800 \n          border border-border-DEFAULT dark:border-stone-700 \n          rounded-lg shadow-lg text-content-DEFAULT dark:text-white",children:t})]})},ce=({history:e=[],onClose:t})=>e?x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/20",children:x.jsxs("div",{className:"relative bg-background-light dark:bg-stone-800 p-6 rounded-lg w-full max-w-lg border border-border-light dark:border-stone-700 shadow-lg m-4 max-h-[80vh] overflow-y-auto",children:[x.jsx("div",{className:"sticky top-0 bg-background-light dark:bg-stone-800 pb-4 mb-4 border-b border-border-light dark:border-stone-700",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-medium text-content-dark dark:text-white",children:"Status History"}),x.jsx("button",{onClick:t,className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors",children:x.jsx(h,{className:"w-5 h-5 text-content-light dark:text-stone-400"})})]})}),x.jsx("div",{className:"space-y-4",children:0===e.length?x.jsx("p",{className:"text-center text-content-light dark:text-stone-400",children:"No status history available"}):e.map(((e,t)=>x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary-light/10 dark:bg-orange-500/10 flex items-center justify-center",children:x.jsx(y,{className:"w-5 h-5 text-primary-DEFAULT dark:text-orange-500"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-content-DEFAULT dark:text-white capitalize",children:e.status.replace("_"," ")}),x.jsx("p",{className:"text-sm text-content-light dark:text-stone-400",children:new Date(e.timestamp).toLocaleString()}),e.note&&x.jsx("p",{className:"text-sm text-content-light dark:text-stone-400 mt-1",children:e.note})]})]},t)))})]})}):null,xe=()=>{const[e,t]=$.useState([]),[r,s]=$.useState(!0),[n,a]=$.useState(""),[l,d]=$.useState("all"),[i,o]=$.useState(null),[h,m]=$.useState(null),[u,b]=$.useState(""),[p,v]=$.useState(!1),[j,N]=$.useState(!1),[f,y]=$.useState(1);$.useEffect((()=>{w()}),[]),$.useEffect((()=>{y(1)}),[n,l]);const w=()=>c(void 0,null,(function*(){try{s(!0);const e=yield Z.get(O.ENDPOINTS.BOOKINGS.BASE);e.success&&t(e.data)}catch(e){e.message.includes("token")&&(window.location.href="/login")}finally{s(!1)}})),S=(t,r)=>c(void 0,null,(function*(){const s=e.find((e=>e._id===t));o(s),m(r),b(""),v(!0)})),A=()=>{v(!1),o(null),m(null),b("")},T=(e="pending")=>({pending:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",confirmed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}[e.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"),C=e.filter((e=>{var t;const r=((null==(t=e.name)?void 0:t.toLowerCase())||"").includes(n.toLowerCase())||(e.contact||"").includes(n)||(e.confirmationNumber||"").includes(n);return"all"===l?r:r&&e.status===l})),L=Math.ceil(C.length/20),F=20*(f-1),U=C.slice(F,F+20);return r?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light dark:border-orange-500"})}):x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"flex justify-between items-center",children:x.jsx("h1",{className:"text-2xl font-bold text-content-dark dark:text-white",children:"Booking Management"})}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[x.jsxs("div",{className:"relative flex-1",children:[x.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-content-light"}),x.jsx(ie,{type:"text",placeholder:"Search bookings...",value:n,onChange:e=>a(e.target.value),className:"pl-10 w-full"})]}),x.jsxs("select",{value:l,onChange:e=>d(e.target.value),className:"px-4 py-2 bg-background-light dark:bg-stone-800 rounded-lg border border-border-DEFAULT dark:border-stone-700 text-content-DEFAULT dark:text-white w-full sm:w-auto",children:[x.jsx("option",{value:"all",children:"All Bookings"}),x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"confirmed",children:"Confirmed"}),x.jsx("option",{value:"in_progress",children:"In Progress"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),x.jsx("div",{className:"lg:hidden",children:U.map((e=>{var t;return x.jsxs("div",{className:"p-4 bg-background-DEFAULT dark:bg-stone-800 rounded-lg border border-border-light dark:border-stone-700 mb-4",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsx("span",{className:"font-mono text-primary-DEFAULT dark:text-orange-500",children:e.confirmationNumber}),x.jsx("button",{onClick:()=>{o(e),N(!0)},className:"p-1 text-primary-DEFAULT dark:text-orange-500",children:x.jsx(E,{className:"w-5 h-5"})})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("p",{className:"text-content-DEFAULT dark:text-white",children:e.dateTime}),x.jsx("p",{className:"font-medium text-content-DEFAULT dark:text-white",children:e.name}),x.jsx("p",{className:"text-sm text-content-light dark:text-stone-400",children:e.contact}),e.email&&x.jsx("p",{className:"text-sm text-content-light dark:text-stone-400",children:e.email}),x.jsx("p",{className:"font-medium text-content-DEFAULT dark:text-white",children:e.serviceName}),x.jsxs("p",{className:"text-sm text-content-light dark:text-stone-400",children:[e.vehicleType," - ",e.makeModel]}),(null==(t=e.optionalServices)?void 0:t.length)>0&&x.jsxs("div",{className:"text-sm text-primary-DEFAULT dark:text-orange-500",children:["+",e.optionalServices.length," add-ons"]}),x.jsxs("div",{className:"flex justify-between items-center mt-4",children:[x.jsxs("select",{value:e.status||"pending",onChange:t=>S(e._id,t.target.value),className:`${T(e.status)} px-2 py-1 rounded-lg text-sm`,children:[x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"confirmed",children:"Confirmed"}),x.jsx("option",{value:"in_progress",children:"In Progress"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]}),x.jsxs("span",{className:"font-medium text-content-DEFAULT dark:text-white",children:["$",e.totalPrice||0]})]})]})]},e._id)}))}),x.jsx("div",{className:"hidden lg:block w-full overflow-x-auto bg-background-light dark:bg-stone-800 rounded-lg border border-border-light dark:border-stone-700",children:x.jsxs(re,{children:[x.jsx(se,{children:x.jsxs(ae,{children:[x.jsx(le,{children:"Booking #"}),x.jsx(le,{children:"Date & Time"}),x.jsx(le,{children:"Customer"}),x.jsx(le,{children:"Service"}),x.jsx(le,{children:"Vehicle"}),x.jsx(le,{children:"Status"}),x.jsx(le,{children:"Total"}),x.jsx(le,{children:"History"})]})}),x.jsx(ne,{children:U.map((e=>{var t;return x.jsxs(ae,{children:[x.jsx(de,{className:"font-mono text-primary-DEFAULT dark:text-orange-500",children:e.confirmationNumber}),x.jsx(de,{className:"text-content-DEFAULT dark:text-white",children:e.dateTime}),x.jsx(de,{children:x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-content-DEFAULT dark:text-white",children:e.name}),x.jsx("div",{className:"text-sm text-content-light dark:text-stone-400",children:e.contact}),e.email&&x.jsx("div",{className:"text-sm text-content-light dark:text-stone-400",children:e.email})]})}),x.jsx(de,{children:x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-content-DEFAULT dark:text-white",children:e.serviceName}),(null==(t=e.optionalServices)?void 0:t.length)>0&&x.jsx(oe,{content:x.jsxs("div",{className:"space-y-2 bg-background-DEFAULT dark:bg-stone-700 p-2 rounded-md",children:[x.jsx("p",{className:"font-medium text-content-DEFAULT dark:text-white",children:"Optional Services:"}),x.jsx("ul",{children:e.optionalServices.map((e=>x.jsxs("li",{className:"text-content-DEFAULT dark:text-stone-300",children:[e.name," - $",e.price]},e._id)))})]}),children:x.jsxs("div",{className:"text-sm text-primary-DEFAULT dark:text-orange-500 hover:text-primary-light dark:hover:text-orange-400 cursor-pointer",children:["+",e.optionalServices.length," add-ons"]})})]})}),x.jsx(de,{children:x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-content-DEFAULT dark:text-white",children:e.vehicleType}),x.jsx("div",{className:"text-sm text-content-light dark:text-stone-400",children:e.makeModel})]})}),x.jsx(de,{children:x.jsxs("select",{value:e.status||"pending",onChange:t=>S(e._id,t.target.value),className:`${T(e.status)} px-2 py-1 rounded-lg text-sm border-0 focus:ring-1 focus:ring-primary-light dark:focus:ring-orange-500 cursor-pointer`,children:[x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"confirmed",children:"Confirmed"}),x.jsx("option",{value:"in_progress",children:"In Progress"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),x.jsxs(de,{className:"font-medium text-content-DEFAULT dark:text-white",children:["$",e.totalPrice||0]}),x.jsx(de,{children:x.jsx("button",{onClick:()=>{o(e),N(!0)},className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors",title:"View Status History",children:x.jsx(E,{className:"w-5 h-5 text-primary-DEFAULT dark:text-orange-500"})})})]},e._id)}))})]})}),L>1&&x.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[x.jsx("button",{onClick:()=>y((e=>Math.max(e-1,1))),disabled:1===f,className:"p-2 rounded-lg hover:bg-background-dark dark:hover:bg-stone-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x.jsx(k,{className:"w-5 h-5"})}),x.jsxs("span",{className:"text-content-DEFAULT dark:text-white",children:["Page ",f," of ",L]}),x.jsx("button",{onClick:()=>y((e=>Math.min(e+1,L))),disabled:f===L,className:"p-2 rounded-lg hover:bg-background-dark dark:hover:bg-stone-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x.jsx(g,{className:"w-5 h-5"})})]}),p&&i&&x.jsx("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-background-light dark:bg-stone-800 p-6 rounded-lg w-full max-w-lg border border-border-light dark:border-stone-700 shadow-lg",children:[x.jsx("h3",{className:"text-lg font-medium mb-4 text-content-dark dark:text-white",children:"Update Status"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2 text-content-DEFAULT dark:text-white",children:"New Status"}),x.jsx("div",{className:"w-full p-2 bg-background-DEFAULT dark:bg-stone-900 border border-border-DEFAULT dark:border-stone-700 rounded-lg",children:x.jsx("span",{className:"capitalize",children:h.replace("_"," ")})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Note (Optional)"}),x.jsx("textarea",{value:u,onChange:e=>b(e.target.value),className:"w-full p-2 bg-background-DEFAULT dark:bg-stone-900 border border-border-DEFAULT dark:border-stone-700 rounded-lg h-24",placeholder:"Add a note about this status change..."})]})]}),x.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[x.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg bg-background-DEFAULT dark:bg-stone-700 border border-border-DEFAULT dark:border-stone-600 hover:bg-background-dark dark:hover:bg-stone-600 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:()=>c(void 0,null,(function*(){if(i&&h)try{(yield Z.put(O.ENDPOINTS.BOOKINGS.UPDATE_STATUS(i._id),{status:h,note:u})).success&&(yield w(),A())}catch(e){}})),className:"px-4 py-2 rounded-lg bg-primary-light dark:bg-orange-500 text-white hover:bg-primary-DEFAULT dark:hover:bg-orange-600 transition-colors",children:"Update Status"})]})]})}),j&&i&&x.jsx(ce,{history:i.statusHistory||[],onClose:()=>{N(!1),o(null)}})]})},he=({service:e,onClose:t,onSave:r})=>{var s;const{vehicleTypes:n}=H(),[a,l]=$.useState({name:(null==e?void 0:e.name)||"",features:(null==e?void 0:e.features)||[""],vehiclePricing:(null==e?void 0:e.vehiclePricing)||n.reduce(((e,t)=>i(d({},e),{[t.id]:0})),{}),category:(null==e?void 0:e.category)||"DRIVE-IN",isActive:null==(s=null==e?void 0:e.isActive)||s,sortOrder:(null==e?void 0:e.sortOrder)||0}),[o,m]=$.useState({}),[g,u]=$.useState(!1);return x.jsx("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-background-light dark:bg-stone-800 rounded-lg w-full max-w-2xl \n                    border border-border-light dark:border-stone-700 shadow-lg \n                    flex flex-col max-h-[90vh]",children:[x.jsx("div",{className:"p-6 border-b border-border-light dark:border-stone-700",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h2",{className:"text-xl font-medium text-content-dark dark:text-white",children:(null==e?void 0:e._id)?"Edit Service":"Add New Service"}),x.jsx("button",{onClick:t,className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 \n                       rounded-lg transition-colors text-content-light dark:text-stone-400",children:x.jsx(h,{className:"w-4 h-4"})})]})}),x.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x.jsxs("form",{onSubmit:s=>c(void 0,null,(function*(){if(s.preventDefault(),(()=>{const e={};return a.name.trim()||(e.name="Service name is required"),a.features.some((e=>e.trim()))||(e.features="At least one feature is required"),Object.values(a.vehiclePricing).some((e=>isNaN(e)||e<0))&&(e.pricing="All pricing values must be valid numbers greater than or equal to 0"),m(e),0===Object.keys(e).length})()&&!g)try{u(!0);const s=(null==e?void 0:e._id)?O.ENDPOINTS.SERVICES.BY_ID(e._id):O.ENDPOINTS.SERVICES.BASE,n=(null==e?void 0:e._id)?yield Z.put(s,a):yield Z.post(s,a);n.success&&(r(n.data),t())}catch(n){m((e=>i(d({},e),{submit:n.message})))}finally{u(!1)}})),className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2 text-content-DEFAULT dark:text-white",children:"Service Name"}),x.jsx("input",{type:"text",value:a.name,onChange:e=>l(i(d({},a),{name:e.target.value})),className:"w-full p-2 rounded-lg border transition-colors\n                         bg-background-light dark:bg-stone-800 \n                         border-border-DEFAULT dark:border-stone-700\n                         text-content-DEFAULT dark:text-white \n                         focus:border-primary-light dark:focus:border-orange-500",placeholder:"Enter service name"}),o.name&&x.jsx("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1",children:o.name})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2 text-content-DEFAULT dark:text-white",children:"Category"}),x.jsxs("select",{value:a.category,onChange:e=>l(i(d({},a),{category:e.target.value})),className:"w-full p-2 rounded-lg border transition-colors\n                         bg-background-light dark:bg-stone-800 \n                         border-border-DEFAULT dark:border-stone-700\n                         text-content-DEFAULT dark:text-white",children:[x.jsx("option",{value:"DRIVE-IN",children:"Drive-in"}),x.jsx("option",{value:"APPOINTMENT",children:"Appointment"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2 text-content-DEFAULT dark:text-white",children:"Features"}),x.jsxs("div",{className:"space-y-2",children:[a.features.map(((e,t)=>x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:e,onChange:e=>((e,t)=>{const r=[...a.features];r[e]=t,l(i(d({},a),{features:r}))})(t,e.target.value),className:"flex-1 p-2 rounded-lg border transition-colors\n                               bg-background-light dark:bg-stone-800 \n                               border-border-DEFAULT dark:border-stone-700\n                               text-content-DEFAULT dark:text-white",placeholder:"Feature description"}),x.jsx("button",{type:"button",onClick:()=>(e=>{a.features.length>1&&l(i(d({},a),{features:a.features.filter(((t,r)=>r!==e))}))})(t),className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 \n                               rounded-lg transition-colors text-red-500",disabled:1===a.features.length,children:x.jsx(T,{className:"w-4 h-4"})})]},t))),x.jsxs("button",{type:"button",onClick:()=>{l(i(d({},a),{features:[...a.features,""]}))},className:"flex items-center gap-2 text-sm text-primary-DEFAULT dark:text-orange-500 \n                           hover:text-primary-dark dark:hover:text-orange-400",children:[x.jsx(f,{className:"w-4 h-4"}),"Add Feature"]})]}),o.features&&x.jsx("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1",children:o.features})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2 text-content-DEFAULT dark:text-white",children:"Pricing"}),x.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.map((e=>x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-content-light dark:text-stone-400 mb-1 capitalize",children:e.label}),x.jsx("input",{type:"number",min:"0",step:"0.01",value:a.vehiclePricing[e.id]||0,onChange:t=>((e,t)=>{l(i(d({},a),{vehiclePricing:i(d({},a.vehiclePricing),{[e]:Number(t)})}))})(e.id,t.target.value),className:"w-full p-2 rounded-lg border transition-colors\n                               bg-background-light dark:bg-stone-800 \n                               border-border-DEFAULT dark:border-stone-700\n                               text-content-DEFAULT dark:text-white"})]},e.id)))}),o.pricing&&x.jsx("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1",children:o.pricing})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:e=>l(i(d({},a),{isActive:e.target.checked})),className:"rounded border-border-DEFAULT bg-background-light dark:bg-stone-800"}),x.jsx("label",{htmlFor:"isActive",className:"text-sm text-content-DEFAULT dark:text-white",children:"Active"})]}),o.submit&&x.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-500 dark:text-red-400 p-3 rounded-lg text-sm",children:o.submit}),x.jsx("div",{className:"p-6 border-t border-border-light dark:border-stone-700 bg-background-light dark:bg-stone-800",children:x.jsxs("div",{className:"flex justify-end gap-4",children:[x.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg transition-colors\n                       bg-background-DEFAULT dark:bg-stone-700 \n                       text-content-DEFAULT dark:text-white \n                       border border-border-DEFAULT dark:border-stone-600 \n                       hover:bg-background-dark dark:hover:bg-stone-600",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 rounded-lg transition-colors\n                       bg-primary-light dark:bg-orange-500 \n                       text-white\n                       hover:bg-primary-DEFAULT dark:hover:bg-orange-600 \n                       disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":(null==e?void 0:e._id)?"Update Service":"Create Service"})]})})]})})]})})},me=()=>{const{vehicleTypes:e}=H(),[t,r]=$.useState([]),[s,n]=$.useState(!0),[a,l]=$.useState(null),[o,h]=$.useState(!1),[m,g]=$.useState(null);$.useEffect((()=>{c(void 0,null,(function*(){try{n(!0);const e=yield Z.get(O.ENDPOINTS.SERVICES.BASE);e.success&&r(e.data)}catch(e){g(e.message)}finally{n(!1)}}))}),[]);const u=e=>{l(e),h(!0)},b=e=>c(void 0,null,(function*(){if(window.confirm("Are you sure you want to mark this service as inactive?"))try{(yield Z.delete(O.ENDPOINTS.SERVICES.BY_ID(e))).success&&r(t.map((t=>t._id===e?i(d({},t),{isActive:!1}):t)))}catch(s){}}));return s?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-light dark:border-orange-500"})}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-content-dark dark:text-white",children:"Service Management"}),x.jsxs("button",{onClick:()=>{l({name:"",features:[""],vehiclePricing:{sedan:0,"mini-suv":0,suv:0,"van/truck":0}}),h(!0)},className:"flex items-center gap-2 px-4 py-2 \n                   bg-primary-light dark:bg-orange-500 text-white rounded-lg \n                   hover:bg-primary-DEFAULT dark:hover:bg-orange-600 \n                   transition-colors",children:[x.jsx(f,{className:"w-4 h-4"}),x.jsx("span",{className:"hidden sm:inline",children:"Add Service"}),x.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),x.jsx("div",{className:"lg:hidden space-y-4",children:t.map((t=>x.jsxs("div",{className:"p-4 bg-white dark:bg-stone-800 rounded-lg border border-border-light dark:border-stone-700 mb-4",children:[x.jsxs("div",{className:"flex justify-between items-start mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-medium text-content-DEFAULT dark:text-white",children:t.name}),x.jsx("span",{className:"inline-block mt-1 px-2 py-1 rounded-full text-xs "+(t.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:t.isActive?"Active":"Inactive"})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>u(t),className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors text-content-light dark:text-stone-400",children:x.jsx(C,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>b(t._id),className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 rounded-lg transition-colors text-red-500",children:x.jsx(L,{className:"w-4 h-4"})})]})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("h4",{className:"text-sm font-medium text-content-light dark:text-stone-400 mb-2",children:"Features"}),x.jsx("ul",{className:"list-disc list-inside space-y-1",children:t.features.map(((e,t)=>x.jsx("li",{className:"text-sm text-content-DEFAULT dark:text-stone-300",children:e},t)))})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"text-sm font-medium text-content-light dark:text-stone-400 mb-2",children:"Pricing"}),x.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map((e=>x.jsxs("div",{className:"text-sm",children:[x.jsx("span",{className:"text-content-light dark:text-stone-400 capitalize",children:e.label}),x.jsxs("span",{className:"text-primary-DEFAULT dark:text-orange-500 ml-2",children:["$",t.vehiclePricing[e.id]||0]})]},e.id)))})]})]},t._id)))}),x.jsx("div",{className:"hidden lg:block w-full overflow-x-auto \n                  bg-background-light dark:bg-stone-800 \n                  rounded-lg border border-border-light dark:border-stone-700 \n                  relative z-0",children:x.jsxs(re,{children:[x.jsx(se,{children:x.jsxs(ae,{children:[x.jsx(le,{className:"text-content-light dark:text-stone-400",children:"Service Name"}),x.jsx(le,{className:"text-content-light dark:text-stone-400",children:"Features"}),x.jsx(le,{className:"text-content-light dark:text-stone-400",children:"Pricing"}),x.jsx(le,{className:"text-content-light dark:text-stone-400",children:"Status"}),x.jsx(le,{className:"text-right text-content-light dark:text-stone-400",children:"Actions"})]})}),x.jsx(ne,{children:t.map((t=>x.jsxs(ae,{children:[x.jsx(de,{className:"font-medium text-content-DEFAULT dark:text-white",children:t.name}),x.jsx(de,{children:x.jsx("ul",{className:"list-disc list-inside",children:t.features.map(((e,t)=>x.jsx("li",{className:"text-sm text-content-light dark:text-stone-400",children:e},t)))})}),x.jsx(de,{children:x.jsx("div",{className:"space-y-1",children:e.map((e=>x.jsxs("div",{className:"text-sm",children:[x.jsxs("span",{className:"text-content-light dark:text-stone-400 capitalize",children:[e.label,":"]}),x.jsxs("span",{className:"text-primary-DEFAULT dark:text-orange-500 ml-1",children:["$",t.vehiclePricing[e.id]||0]})]},e.id)))})}),x.jsx(de,{children:x.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(t.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:t.isActive?"Active":"Inactive"})}),x.jsx(de,{className:"text-right",children:x.jsxs("div",{className:"flex justify-end gap-2",children:[x.jsx("button",{onClick:()=>u(t),className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 \n                               rounded-lg transition-colors text-content-light dark:text-stone-400",children:x.jsx(C,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>b(t._id),className:"p-2 hover:bg-background-dark dark:hover:bg-stone-700 \n                               rounded-lg transition-colors text-red-500",children:x.jsx(L,{className:"w-4 h-4"})})]})})]},t._id)))})]})}),o&&x.jsx(he,{service:a,onClose:()=>{h(!1),l(null)},onSave:e=>{(null==a?void 0:a._id)?r(t.map((t=>t._id===e._id?e:t))):r([...t,e]),h(!1),l(null)}})]})},ge=()=>{const[e,t]=$.useState(null),[r,s]=$.useState("vehicleTypes"),[n,a]=$.useState([]),[l,o]=$.useState([]),[m,g]=$.useState([]),[u,b]=$.useState(null),[p,v]=$.useState({}),[j,k]=$.useState(!0);$.useEffect((()=>{y()}),[]);const N=e=>{const t=(e=>{switch(e){case"vehicle-types":return{id:"",label:"",isActive:!0,sortOrder:0};case"scents":return{id:l.length>0?Math.max(...l.map((e=>e.id)))+1:1,name:"",isActive:!0,sortOrder:0};case"optional-services":return{id:m.length>0?Math.max(...m.map((e=>e.id)))+1:1,name:"",description:"",price:0,isActive:!0,sortOrder:0};default:return{}}})(e);b("new"),v(t)},y=()=>c(void 0,null,(function*(){try{k(!0);const[e,t,r]=yield Promise.all([Z.get(O.ENDPOINTS.CONFIG.VEHICLE_TYPES),Z.get(O.ENDPOINTS.CONFIG.SCENTS),Z.get(O.ENDPOINTS.CONFIG.OPTIONAL_SERVICES)]);a(e.data),o(t.data),g(r.data)}catch(e){}finally{k(!1)}})),w=e=>c(void 0,null,(function*(){try{let r,s=d({},p);if("vehicle-types"===e){if(!s.id.trim())return void t("Vehicle type ID cannot be empty")}else{if(s.id=parseInt(s.id),isNaN(s.id)||s.id<1)return void t("ID must be a positive number");"optional-services"===e&&(s.price=parseFloat(s.price))}r="new"===u?yield Z.post(O.ENDPOINTS.CONFIG.BASE(e),s):yield Z.put(O.ENDPOINTS.CONFIG.BY_ID(e,u),s),r.success&&(yield y(),b(null),v({}),t(null))}catch(r){t(r.message)}})),S=(e,t,r)=>c(void 0,null,(function*(){try{const s="vehicle-types"===e?n:"scents"===e?l:m,a=s.findIndex((e=>e._id===t)),d="up"===r?s[a].sortOrder-1:s[a].sortOrder+1;yield Z.put(O.ENDPOINTS.CONFIG.BY_ID(e,t),{sortOrder:d}),yield y()}catch(s){}})),A=e=>{b(e._id),v(e)};return j?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 \n                        border-primary-light dark:border-orange-500"})}):x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"border-b border-border-light",children:x.jsxs("nav",{className:"flex space-x-8",children:[x.jsx("button",{onClick:()=>s("vehicleTypes"),className:"px-1 py-4 border-b-2 text-sm font-medium "+("vehicleTypes"===r?"border-primary-light text-primary-light dark:border-orange-500 dark:text-orange-500":"border-transparent text-content-light hover:text-content-DEFAULT hover:border-border-DEFAULT dark:text-stone-400 dark:hover:text-stone-200 dark:hover:border-stone-700"),children:"Vehicle Types"}),x.jsx("button",{onClick:()=>s("scents"),className:"px-1 py-4 border-b-2 text-sm font-medium "+("scents"===r?"border-primary-light text-primary-light dark:border-orange-500 dark:text-orange-500":"border-transparent text-content-light hover:text-content-DEFAULT hover:border-border-DEFAULT dark:text-stone-400 dark:hover:text-stone-200 dark:hover:border-stone-700"),children:"Scents"}),x.jsx("button",{onClick:()=>s("optionalServices"),className:"px-1 py-4 border-b-2 text-sm font-medium "+("optionalServices"===r?"border-primary-light text-primary-light dark:border-orange-500 dark:text-orange-500":"border-transparent text-content-light hover:text-content-DEFAULT hover:border-border-DEFAULT dark:text-stone-400 dark:hover:text-stone-200 dark:hover:border-stone-700"),children:"Optional Services"})]})}),x.jsx("div",{className:"mt-6",children:"vehicleTypes"===r&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-semibold text-content-dark dark:text-white",children:"Vehicle Types"}),x.jsxs("button",{onClick:()=>N("vehicle-types"),className:"flex items-center gap-2 px-4 py-2 text-sm \n                bg-primary-light dark:bg-orange-500 text-white rounded-lg \n                hover:bg-primary-DEFAULT dark:hover:bg-orange-600 \n                transition-colors",children:[x.jsx(f,{className:"w-4 h-4"}),"Add Vehicle Type"]})]}),x.jsx("div",{className:"w-full overflow-x-auto \n                bg-background-light dark:bg-stone-800 rounded-lg \n                border border-border-light dark:border-stone-700 \n                relative z-0",children:x.jsxs(re,{children:[x.jsx(se,{children:x.jsxs(ae,{children:[x.jsx(le,{children:"Sort"}),x.jsx(le,{children:"ID"}),x.jsx(le,{children:"Label"}),x.jsx(le,{children:"Status"}),x.jsx(le,{children:"Actions"})]})}),x.jsxs(ne,{children:["new"===u&&x.jsxs(ae,{children:[x.jsx(de,{children:"-"}),x.jsx(de,{children:x.jsx(ie,{type:"text",value:p.id||"",onChange:e=>v(i(d({},p),{id:e.target.value})),placeholder:"Enter ID (e.g., sedan, suv)",className:"lowercase",required:!0})}),x.jsx(de,{children:x.jsx(ie,{type:"text",value:p.label||"",onChange:e=>v(i(d({},p),{label:e.target.value})),placeholder:"Enter Label"})}),x.jsx(de,{children:x.jsxs("select",{value:p.isActive,onChange:e=>v(i(d({},p),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md \n             bg-background-light dark:bg-stone-800\n             border-border-DEFAULT dark:border-stone-700\n             text-content-DEFAULT dark:text-white",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]})}),x.jsx(de,{children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>w("vehicle-types"),className:"p-1 text-green-600 dark:text-green-400 \n                          hover:bg-green-50 dark:hover:bg-green-900/20 rounded",children:x.jsx(F,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>{b(null),v({})},className:"p-1 text-red-600 dark:text-red-400 \n                          hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]})})]}),n.map((e=>x.jsxs(ae,{children:[x.jsx(de,{children:x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>S("vehicle-types",e._id,"up"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(U,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>S("vehicle-types",e._id,"down"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(I,{className:"w-4 h-4"})})]})}),x.jsx(de,{children:u===e._id?x.jsx(ie,{value:p.id||"",onChange:e=>v(i(d({},p),{id:e.target.value}))}):e.id}),x.jsx(de,{children:u===e._id?x.jsx(ie,{value:p.label||"",onChange:e=>v(i(d({},p),{label:e.target.value}))}):e.label}),x.jsx(de,{children:u===e._id?x.jsxs("select",{value:p.isActive,onChange:e=>v(i(d({},p),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md \n             bg-background-light dark:bg-stone-800\n             border-border-DEFAULT dark:border-stone-700\n             text-content-DEFAULT dark:text-white",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]}):x.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:e.isActive?"Active":"Inactive"})}),x.jsx(de,{children:u===e._id?x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>w("vehicle-types"),className:"p-1 text-green-600 dark:text-green-400 \n                            hover:bg-green-50 dark:hover:bg-green-900/20 rounded",children:x.jsx(F,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>b(null),className:"p-1 text-red-600 dark:text-red-400 \n                            hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]}):x.jsx("button",{onClick:()=>A(e),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(C,{className:"w-4 h-4"})})})]},e._id)))]})]})})]})}),x.jsx("div",{className:"mt-6",children:"scents"===r&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-semibold text-content-dark dark:text-white",children:"Scents"}),x.jsxs("button",{onClick:()=>N("scents"),className:"flex items-center gap-2 px-4 py-2 text-sm \n                bg-primary-light dark:bg-orange-500 text-white rounded-lg \n                hover:bg-primary-DEFAULT dark:hover:bg-orange-600 \n                transition-colors",children:[x.jsx(f,{className:"w-4 h-4"}),"Add Scent"]})]}),x.jsx("div",{className:"w-full overflow-x-auto \n                bg-background-light dark:bg-stone-800 rounded-lg \n                border border-border-light dark:border-stone-700 \n                relative z-0",children:x.jsxs(re,{children:[x.jsx(se,{children:x.jsxs(ae,{children:[x.jsx(le,{children:"Sort"}),x.jsx(le,{children:"ID"}),x.jsx(le,{children:"Name"}),x.jsx(le,{children:"Status"}),x.jsx(le,{children:"Actions"})]})}),x.jsxs(ne,{children:["new"===u&&x.jsxs(ae,{children:[x.jsx(de,{children:"-"}),x.jsx(de,{children:x.jsx(ie,{type:"number",value:p.id||"",onChange:e=>v(i(d({},p),{id:e.target.value})),placeholder:"ID will be auto-assigned",min:"1",step:"1",required:!0,disabled:"new"===u})}),x.jsx(de,{children:x.jsx(ie,{type:"text",value:p.name||"",onChange:e=>v(i(d({},p),{name:e.target.value})),placeholder:"Enter Name"})}),x.jsx(de,{children:x.jsxs("select",{value:p.isActive,onChange:e=>v(i(d({},p),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md \n             bg-background-light dark:bg-stone-800\n             border-border-DEFAULT dark:border-stone-700\n             text-content-DEFAULT dark:text-white",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]})}),x.jsx(de,{children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>w("scents"),className:"p-1 text-green-600 dark:text-green-400 \n                          hover:bg-green-50 dark:hover:bg-green-900/20 rounded",children:x.jsx(F,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>{b(null),v({})},className:"p-1 text-red-600 dark:text-red-400 \n                          hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]})})]}),l.map((e=>x.jsxs(ae,{children:[x.jsx(de,{children:x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>S("scents",e._id,"up"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(U,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>S("scents",e._id,"down"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(I,{className:"w-4 h-4"})})]})}),x.jsx(de,{children:u===e._id?x.jsx(ie,{type:"number",value:p.id||"",onChange:e=>v(i(d({},p),{id:parseInt(e.target.value)}))}):e.id}),x.jsx(de,{children:u===e._id?x.jsx(ie,{value:p.name||"",onChange:e=>v(i(d({},p),{name:e.target.value}))}):e.name}),x.jsx(de,{children:u===e._id?x.jsxs("select",{value:p.isActive,onChange:e=>v(i(d({},p),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md \n             bg-background-light dark:bg-stone-800\n             border-border-DEFAULT dark:border-stone-700\n             text-content-DEFAULT dark:text-white",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]}):x.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:e.isActive?"Active":"Inactive"})}),x.jsx(de,{children:u===e._id?x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>w("scents"),className:"p-1 text-green-600 dark:text-green-400 \n                            hover:bg-green-50 dark:hover:bg-green-900/20 rounded",children:x.jsx(F,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>b(null),className:"p-1 text-red-600 dark:text-red-400 \n                            hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]}):x.jsx("button",{onClick:()=>A(e),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(C,{className:"w-4 h-4"})})})]},e._id)))]})]})})]})}),x.jsx("div",{className:"mt-6",children:"optionalServices"===r&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-semibold text-content-dark dark:text-white",children:"Optional Services"}),x.jsxs("button",{onClick:()=>N("optional-services"),className:"flex items-center gap-2 px-4 py-2 text-sm \n                bg-primary-light dark:bg-orange-500 text-white rounded-lg \n                hover:bg-primary-DEFAULT dark:hover:bg-orange-600 \n                transition-colors",children:[x.jsx(f,{className:"w-4 h-4"}),"Add Optional Service"]})]}),x.jsx("div",{className:"w-full overflow-x-auto \n                bg-background-light dark:bg-stone-800 rounded-lg \n                border border-border-light dark:border-stone-700 \n                relative z-0",children:x.jsxs(re,{children:[x.jsx(se,{children:x.jsxs(ae,{children:[x.jsx(le,{children:"Sort"}),x.jsx(le,{children:"ID"}),x.jsx(le,{children:"Name"}),x.jsx(le,{children:"Description"}),x.jsx(le,{children:"Price"}),x.jsx(le,{children:"Status"}),x.jsx(le,{children:"Actions"})]})}),x.jsxs(ne,{children:["new"===u&&x.jsxs(ae,{children:[x.jsx(de,{children:"-"}),x.jsx(de,{children:x.jsx(ie,{type:"number",value:p.id||"",onChange:e=>v(i(d({},p),{id:e.target.value})),placeholder:"ID will be auto-assigned",min:"1",step:"1",required:!0,disabled:"new"===u})}),x.jsx(de,{children:x.jsx(ie,{type:"text",value:p.name||"",onChange:e=>v(i(d({},p),{name:e.target.value})),placeholder:"Enter Name"})}),x.jsx(de,{children:x.jsx(ie,{type:"text",value:p.description||"",onChange:e=>v(i(d({},p),{description:e.target.value})),placeholder:"Enter Description"})}),x.jsx(de,{children:x.jsx(ie,{type:"number",value:p.price||"",onChange:e=>v(i(d({},p),{price:parseFloat(e.target.value)})),placeholder:"Enter Price"})}),x.jsx(de,{children:x.jsxs("select",{value:p.isActive,onChange:e=>v(i(d({},p),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md \n             bg-background-light dark:bg-stone-800\n             border-border-DEFAULT dark:border-stone-700\n             text-content-DEFAULT dark:text-white",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]})}),x.jsx(de,{children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>w("optional-services"),className:"p-1 text-green-600 dark:text-green-400 \n                          hover:bg-green-50 dark:hover:bg-green-900/20 rounded",children:x.jsx(F,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>{b(null),v({})},className:"p-1 text-red-600 dark:text-red-400 \n                          hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]})})]}),m.map((e=>x.jsxs(ae,{children:[x.jsx(de,{children:x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>S("optional-services",e._id,"up"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(U,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>S("optional-services",e._id,"down"),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(I,{className:"w-4 h-4"})})]})}),x.jsx(de,{children:u===e._id?x.jsx(ie,{type:"number",value:p.id||"",onChange:e=>v(i(d({},p),{id:parseInt(e.target.value)}))}):e.id}),x.jsx(de,{children:u===e._id?x.jsx(ie,{value:p.name||"",onChange:e=>v(i(d({},p),{name:e.target.value}))}):e.name}),x.jsx(de,{children:u===e._id?x.jsx(ie,{value:p.description||"",onChange:e=>v(i(d({},p),{description:e.target.value}))}):e.description}),x.jsx(de,{children:u===e._id?x.jsx(ie,{type:"number",value:p.price||"",onChange:e=>v(i(d({},p),{price:parseFloat(e.target.value)}))}):`$${e.price}`}),x.jsx(de,{children:u===e._id?x.jsxs("select",{value:p.isActive,onChange:e=>v(i(d({},p),{isActive:"true"===e.target.value})),className:"p-2 border rounded-md \n             bg-background-light dark:bg-stone-800\n             border-border-DEFAULT dark:border-stone-700\n             text-content-DEFAULT dark:text-white",children:[x.jsx("option",{value:"true",children:"Active"}),x.jsx("option",{value:"false",children:"Inactive"})]}):x.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:e.isActive?"Active":"Inactive"})}),x.jsx(de,{children:u===e._id?x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>w("optional-services"),className:"p-1 text-green-600 dark:text-green-400 \n                            hover:bg-green-50 dark:hover:bg-green-900/20 rounded",children:x.jsx(F,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>b(null),className:"p-1 text-red-600 dark:text-red-400 \n                            hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:x.jsx(h,{className:"w-4 h-4"})})]}):x.jsx("button",{onClick:()=>A(e),className:"p-1 hover:bg-background-dark dark:hover:bg-stone-700 rounded",children:x.jsx(C,{className:"w-4 h-4"})})})]},e._id)))]})]})})]})})]})},ue=({children:e})=>{const{user:t,loading:r}=P();return r?x.jsx("div",{children:"Loading..."}):t?e:x.jsx(W,{to:"/login"})},be=()=>x.jsx(_,{children:x.jsx(V,{children:x.jsxs(G,{element:x.jsx(ue,{children:x.jsx(Q,{})}),children:[x.jsx(G,{index:!0,element:x.jsx(te,{})}),x.jsx(G,{path:"/dashboard",element:x.jsx(te,{})}),x.jsx(G,{path:"/bookings",element:x.jsx(xe,{})}),x.jsx(G,{path:"/services",element:x.jsx(me,{})}),x.jsx(G,{path:"/config",element:x.jsx(ge,{})})]})})});export{be as default};
