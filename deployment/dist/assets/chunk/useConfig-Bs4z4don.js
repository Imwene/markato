var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(r,t,o)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,s=(e,r)=>{for(var t in r||(r={}))n.call(r,t)&&i(e,t,r[t]);if(o)for(var t of o(r))a.call(r,t)&&i(e,t,r[t]);return e};import{C as c,b as d}from"../index-BASjt89t.js";import{r as f}from"../vendor/react-vendor-D7383juu.js";const h={fetch:(e,...o)=>{return n=void 0,a=[e,...o],i=function*(e,o={}){try{const i=JSON.parse(localStorage.getItem("user")),d=s(s({"Content-Type":"application/json"},(null==i?void 0:i.token)&&{Authorization:`Bearer ${i.token}`}),o.headers),f=yield fetch(`${c.API_URL}${e}`,(n=s({},o),a={headers:d},r(n,t(a)))),h=yield f.json();if(!f.ok)throw new Error(h.error||"API request failed");return h}catch(i){throw i}var n,a},new Promise(((e,r)=>{var t=e=>{try{s(i.next(e))}catch(t){r(t)}},o=e=>{try{s(i.throw(e))}catch(t){r(t)}},s=r=>r.done?e(r.value):Promise.resolve(r.value).then(t,o);s((i=i.apply(n,a)).next())}));var n,a,i},get:e=>h.fetch(e,{method:"GET"}),post:(e,r)=>h.fetch(e,{method:"POST",body:JSON.stringify(r)}),put:(e,r)=>h.fetch(e,{method:"PUT",body:JSON.stringify(r)}),delete:e=>h.fetch(e,{method:"DELETE"})},l=()=>{const e=f.useContext(d);if(void 0===e)throw new Error("useConfig must be used within a ConfigProvider");return e};export{h as a,l as u};
